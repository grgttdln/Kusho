<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/home/MainNavigationContainer.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/home/MainNavigationContainer.kt" />
              <option name="originalContent" value="package com.example.app.ui.feature.home&#10;&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.platform.LocalContext&#10;import com.example.app.data.SessionManager&#10;import com.example.app.data.repository.WordRepository&#10;import com.example.app.data.repository.SetRepository&#10;import com.example.app.data.AppDatabase&#10;import com.example.app.ui.feature.dashboard.DashboardScreen&#10;import com.example.app.ui.feature.learn.LearnScreen&#10;import com.example.app.ui.feature.classroom.*&#10;import com.example.app.ui.feature.learn.LessonScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.TutorialModeScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.TutorialModeStudentScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.TutorialSessionScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.SessionAnalyticsScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.TutorialFinishedScreen&#10;import com.example.app.ui.feature.learn.learnmode.LearnModeScreen&#10;import com.example.app.ui.feature.learn.activities.YourActivitiesScreen&#10;import com.example.app.ui.feature.learn.activities.AddNewActivityScreen&#10;import com.example.app.ui.feature.learn.activities.ActivitySetsScreen&#10;import com.example.app.ui.feature.learn.activities.LinkSetsToActivityScreen&#10;import com.example.app.ui.feature.learn.set.SelectSetsScreen&#10;import com.example.app.ui.feature.learn.set.YourSetsScreen&#10;import com.example.app.ui.feature.learn.set.AddSetScreen&#10;import com.example.app.ui.feature.learn.set.EditSetScreen&#10;import com.example.app.ui.feature.learn.set.SelectWordsScreen&#10;import com.example.app.ui.feature.learn.ConfirmationScreen&#10;import com.example.app.ui.feature.learn.learnmode.LearnModeActivitySelectionScreen&#10;&#10;@Composable&#10;fun MainNavigationContainer(&#10;    modifier: Modifier = Modifier,&#10;    onLogout: () -&gt; Unit = {},&#10;    onNavigateToWatchPairing: () -&gt; Unit = {}&#10;) {&#10;    var currentScreen by remember { mutableStateOf(0) }&#10;&#10;    // --- CLASS SECTION STATE ---&#10;    var createdClassName by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedClassId by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedClassName by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedClassCode by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedClassBannerPath by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var addedStudentName by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedStudentId by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedStudentName by remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    // --- TUTORIAL MODE STATE ---&#10;    var tutorialModeStudentId by remember { mutableStateOf(0L) }&#10;    var tutorialModeClassId by remember { mutableStateOf(0L) }&#10;    var tutorialSessionTitle by remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    // --- ACTIVITIES &amp; SETS STATE ---&#10;    var selectedActivityId by remember { mutableStateOf(0L) }&#10;    var selectedActivityTitle by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedActivityIconRes by remember { mutableStateOf(com.example.app.R.drawable.ic_apple) }&#10;    var availableWords by remember { mutableStateOf(listOf&lt;com.example.app.data.entity.Word&gt;()) }&#10;    var createdSetTitle by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedSetId by remember { mutableStateOf(0L) }&#10;    var yourSetsScreenKey by remember { mutableStateOf(0) }&#10;    var wordsForCreation by remember { mutableStateOf(listOf&lt;SetRepository.SelectedWordConfig&gt;()) }&#10;    var wordsForEdit by remember { mutableStateOf(listOf&lt;SetRepository.SelectedWordConfig&gt;()) }&#10;&#10;    // --- REPOSITORY &amp; CONTEXT HELPERS ---&#10;    val context = LocalContext.current&#10;    val sessionManager = remember { SessionManager.getInstance(context) }&#10;    val userId = remember { sessionManager.getUserId() }&#10;    val wordRepository = remember { WordRepository(AppDatabase.getInstance(context).wordDao()) }&#10;    val setRepository = remember {&#10;        SetRepository(&#10;            AppDatabase.getInstance(context).setDao(),&#10;            AppDatabase.getInstance(context).setWordDao(),&#10;            AppDatabase.getInstance(context).wordDao()&#10;        )&#10;    }&#10;&#10;    when (currentScreen) {&#10;        0 -&gt; DashboardScreen(&#10;            modifier = modifier,&#10;            onNavigate = { currentScreen = it },&#10;            onLogout = onLogout,&#10;            onNavigateToWatchPairing = onNavigateToWatchPairing,&#10;            onNavigateToClassDetails = { classId, className, bannerPath -&gt;&#10;                selectedClassId = classId&#10;                selectedClassName = className&#10;                selectedClassBannerPath = bannerPath&#10;                currentScreen = 22 &#10;            }&#10;        )&#10;        1 -&gt; LearnScreen(onNavigate = { currentScreen = it }, modifier = modifier)&#10;        2 -&gt; ClassScreen(&#10;            onNavigate = { currentScreen = it },&#10;            onNavigateToCreateClass = { currentScreen = 20 },&#10;            onNavigateToClassDetails = { classId -&gt;&#10;                selectedClassId = classId&#10;                currentScreen = 22&#10;            },&#10;            onNavigateToStudentDetails = { sId, sName, cName -&gt;&#10;                selectedStudentId = sId&#10;                selectedStudentName = sName&#10;                selectedClassName = cName&#10;                currentScreen = 26&#10;            },&#10;            onNavigateToAddStudent = {&#10;                // Open Add Student flow from the top-level Class screen&#10;                currentScreen = 23&#10;            },&#10;            modifier = modifier&#10;        )&#10;        3 -&gt; LessonScreen(&#10;            onNavigate = { currentScreen = it },&#10;            onNavigateToActivities = { currentScreen = 6 },&#10;            onNavigateToSets = { currentScreen = 7 },&#10;            modifier = modifier&#10;        )&#10;        4 -&gt; TutorialModeScreen(&#10;            onBack = { currentScreen = 1 },&#10;            onStudentSelected = { studentId, classId -&gt;&#10;                tutorialModeStudentId = studentId&#10;                tutorialModeClassId = classId&#10;                currentScreen = 27&#10;            },&#10;            modifier = modifier&#10;        )&#10;        5 -&gt; LearnModeScreen(&#10;            onBack = { currentScreen = 1 },&#10;            onStudentSelected = { studentId, classId -&gt;&#10;                selectedStudentId = studentId.toString()&#10;                selectedClassId = classId.toString()&#10;                currentScreen = 31 // Navigate to activity selection screen&#10;            },&#10;            modifier = modifier&#10;        )&#10;        6 -&gt; YourActivitiesScreen(&#10;            onNavigate = { currentScreen = it },&#10;            onNavigateToSets = { activityId, activityTitle -&gt;&#10;                selectedActivityId = activityId&#10;                selectedActivityTitle = activityTitle&#10;                currentScreen = 16 &#10;            },&#10;            onBackClick = { currentScreen = 3 },&#10;            modifier = modifier&#10;        )&#10;        7 -&gt; {&#10;            key(yourSetsScreenKey) {&#10;                YourSetsScreen(&#10;                    userId = userId,&#10;                    onNavigate = { currentScreen = it },&#10;                    onBackClick = { currentScreen = 3 },&#10;                    onAddSetClick = {&#10;                        selectedActivityId = 0L&#10;                        wordsForCreation = emptyList()&#10;                        currentScreen = 11&#10;                    },&#10;                    onEditSetClick = { setId -&gt;&#10;                        selectedSetId = setId&#10;                        wordsForEdit = emptyList()&#10;                        currentScreen = 14&#10;                    },&#10;                    modifier = modifier&#10;                )&#10;            }&#10;        }&#10;        8 -&gt; AddNewActivityScreen(&#10;            userId = userId,&#10;            onNavigate = { currentScreen = it },&#10;            onBackClick = { currentScreen = 6 },&#10;            onActivityCreated = { currentScreen = 10 },&#10;            modifier = modifier&#10;        )&#10;        9 -&gt; SelectSetsScreen(&#10;            onNavigate = { currentScreen = it },&#10;            onBackClick = { currentScreen = 8 },&#10;            modifier = modifier&#10;        )&#10;        10 -&gt; ConfirmationScreen(&#10;            title = &quot;Activity Created!&quot;,&#10;            onContinueClick = { currentScreen = 6 },&#10;            modifier = modifier&#10;        )&#10;        11 -&gt; AddSetScreen(&#10;            userId = userId,&#10;            activityId = if (selectedActivityId &gt; 0L) selectedActivityId else null,&#10;            onBackClick = { currentScreen = if (selectedActivityId &gt; 0L) 16 else 7 },&#10;            onAddWordsClick = { currentScreen = 12 },&#10;            selectedWords = wordsForCreation,&#10;            onCreateSet = { title, _, _ -&gt;&#10;                createdSetTitle = title&#10;                currentScreen = 13&#10;            },&#10;            modifier = modifier&#10;        )&#10;        12 -&gt; {&#10;            LaunchedEffect(Unit) {&#10;                availableWords = wordRepository.getWordsForUserOnce(userId)&#10;            }&#10;            SelectWordsScreen(&#10;                availableWords = availableWords,&#10;                onBackClick = { currentScreen = 11 },&#10;                onWordsSelected = { words -&gt;&#10;                    wordsForCreation = words&#10;                    currentScreen = 11&#10;                },&#10;                modifier = modifier&#10;            )&#10;        }&#10;        13 -&gt; ConfirmationScreen(&#10;            title = &quot;Set Created!&quot;,&#10;            subtitle = createdSetTitle,&#10;            onContinueClick = {&#10;                yourSetsScreenKey++&#10;                currentScreen = if (selectedActivityId &gt; 0L) 16 else 7&#10;            },&#10;            modifier = modifier&#10;        )&#10;        14 -&gt; EditSetScreen(&#10;            setId = selectedSetId,&#10;            userId = userId,&#10;            onBackClick = { currentScreen = if (selectedActivityId &gt; 0L) 16 else 7 },&#10;            onAddWordsClick = { currentScreen = 15 },&#10;            onUpdateSuccess = {&#10;                yourSetsScreenKey++&#10;                currentScreen = if (selectedActivityId &gt; 0L) 16 else 7&#10;            },&#10;            onDeleteSuccess = {&#10;                yourSetsScreenKey++&#10;                currentScreen = if (selectedActivityId &gt; 0L) 16 else 7&#10;            },&#10;            selectedWords = wordsForEdit,&#10;            modifier = modifier&#10;        )&#10;        15 -&gt; {&#10;            LaunchedEffect(Unit) {&#10;                availableWords = wordRepository.getWordsForUserOnce(userId)&#10;            }&#10;            SelectWordsScreen(&#10;                availableWords = availableWords,&#10;                onBackClick = { currentScreen = 14 },&#10;                onWordsSelected = { words -&gt;&#10;                    wordsForEdit = words&#10;                    currentScreen = 14&#10;                },&#10;                modifier = modifier&#10;            )&#10;        }&#10;        16 -&gt; {&#10;            key(yourSetsScreenKey) {&#10;                ActivitySetsScreen(&#10;                    activityId = selectedActivityId,&#10;                    activityTitle = selectedActivityTitle,&#10;                    onNavigate = { currentScreen = it },&#10;                    onBackClick = { currentScreen = 6 },&#10;                    onAddSetClick = { currentScreen = 17 },&#10;                    onViewSetClick = { setId -&gt;&#10;                        selectedSetId = setId&#10;                        currentScreen = 14&#10;                    },&#10;                    modifier = modifier&#10;                )&#10;            }&#10;        }&#10;        17 -&gt; LinkSetsToActivityScreen(&#10;            activityId = selectedActivityId,&#10;            userId = userId,&#10;            onBackClick = { currentScreen = 16 },&#10;            onSetsLinked = {&#10;                yourSetsScreenKey++&#10;                currentScreen = 16&#10;            },&#10;            modifier = modifier&#10;        )&#10;&#10;        // --- Classroom Flow (20-26) ---&#10;        20 -&gt; CreateClassScreen(&#10;            onNavigateBack = { currentScreen = 2 },&#10;            onClassCreated = { className -&gt;&#10;                createdClassName = className&#10;                currentScreen = 21&#10;            },&#10;            modifier = modifier&#10;        )&#10;        21 -&gt; ClassCreatedSuccessScreen(&#10;            className = createdClassName,&#10;            onContinue = { currentScreen = 2 },&#10;            modifier = modifier&#10;        )&#10;        22 -&gt; ClassDetailsScreen(&#10;            classId = selectedClassId,&#10;            onNavigateBack = { currentScreen = 2 },&#10;            onNavigateToAddStudent = { className -&gt;&#10;                selectedClassName = className&#10;                currentScreen = 23&#10;            },&#10;            onNavigateToEditClass = { id, name, code, banner -&gt;&#10;                selectedClassId = id&#10;                selectedClassName = name&#10;                selectedClassCode = code&#10;                selectedClassBannerPath = banner&#10;                currentScreen = 25&#10;            },&#10;            onNavigateToStudentDetails = { sId, sName, cName -&gt;&#10;                selectedStudentId = sId&#10;                selectedStudentName = sName&#10;                selectedClassName = cName&#10;                currentScreen = 26&#10;            },&#10;            modifier = modifier&#10;        )&#10;        23 -&gt; AddStudentScreen(&#10;            onNavigateBack = { currentScreen = 2 },&#10;            onStudentAdded = { studentName -&gt;&#10;                addedStudentName = studentName&#10;                currentScreen = 24&#10;            },&#10;            modifier = modifier&#10;        )&#10;        24 -&gt; StudentAddedSuccessScreen(&#10;            studentName = addedStudentName,&#10;            onContinue = { currentScreen = 2 },&#10;            modifier = modifier&#10;        )&#10;        25 -&gt; EditClassScreen(&#10;            classId = selectedClassId,&#10;            initialClassName = selectedClassName,&#10;            initialClassCode = selectedClassCode,&#10;            initialBannerPath = selectedClassBannerPath,&#10;            onNavigateBack = { currentScreen = 22 },&#10;            onSaveChanges = { newName, newCode -&gt;&#10;                selectedClassName = newName&#10;                selectedClassCode = newCode&#10;            },&#10;            onArchiveClass = { currentScreen = 2 },&#10;            modifier = modifier&#10;        )&#10;        26 -&gt; StudentDetailsScreen(&#10;            studentId = selectedStudentId,&#10;            studentName = selectedStudentName,&#10;            className = selectedClassName,&#10;            classId = selectedClassId,&#10;            onNavigateBack = { currentScreen = 2 },&#10;            modifier = modifier&#10;        )&#10;        27 -&gt; TutorialModeStudentScreen(&#10;            studentId = tutorialModeStudentId,&#10;            classId = tutorialModeClassId,&#10;            onBack = { currentScreen = 4 },&#10;            onStartSession = { title -&gt;&#10;                tutorialSessionTitle = title&#10;                currentScreen = 28&#10;            },&#10;            modifier = modifier&#10;        )&#10;        28 -&gt; TutorialSessionScreen(&#10;            title = tutorialSessionTitle,&#10;            onEndSession = { currentScreen = 29 },&#10;            modifier = modifier&#10;        )&#10;        29 -&gt; SessionAnalyticsScreen(&#10;            onPracticeAgain = { currentScreen = 28 },&#10;            onContinue = { currentScreen = 30 },&#10;            modifier = modifier&#10;        )&#10;        30 -&gt; TutorialFinishedScreen(&#10;            onEndSession = { currentScreen = 4 },&#10;            modifier = modifier&#10;        )&#10;        31 -&gt; LearnModeActivitySelectionScreen(&#10;            studentId = selectedStudentId.toLongOrNull() ?: 0L,&#10;            classId = selectedClassId.toLongOrNull() ?: 0L,&#10;            onBack = { currentScreen = 5 },&#10;            onSelectActivity = { activityId: Long, activityTitle: String -&gt;&#10;                selectedActivityId = activityId&#10;                selectedActivityTitle = activityTitle&#10;                // Optionally set a default icon or handle icon selection elsewhere&#10;                currentScreen = 32 // Navigate to LearnModeSetStatusScreen&#10;            },&#10;            modifier = modifier&#10;        )&#10;        32 -&gt; {&#10;            val setsFlow = remember(selectedActivityId) { setRepository.getSetsForActivity(selectedActivityId) }&#10;            val sets by setsFlow.collectAsState(initial = emptyList())&#10;            val activitySetStatuses = sets.map {&#10;                com.example.app.ui.feature.learn.learnmode.ActivitySetStatus(&#10;                    setId = it.id,&#10;                    title = it.title,&#10;                    status = &quot;Not Started&quot; // TODO: Replace with real status if available&#10;                )&#10;            }&#10;            com.example.app.ui.feature.learn.learnmode.LearnModeSetStatusScreen(&#10;                activityIconRes = selectedActivityIconRes,&#10;                activityTitle = selectedActivityTitle,&#10;                sets = activitySetStatuses,&#10;                onBack = { currentScreen = 31 },&#10;                onStartSet = { set -&gt;&#10;                    // Navigate to LearnModeSessionScreen and pass the set id and title&#10;                    selectedSetId = set.setId&#10;                    tutorialSessionTitle = set.title&#10;                    currentScreen = 33&#10;                },&#10;                modifier = modifier&#10;            )&#10;        }&#10;        33 -&gt; com.example.app.ui.feature.learn.learnmode.LearnModeSessionScreen(&#10;            setId = selectedSetId,&#10;            activityTitle = tutorialSessionTitle,&#10;            modifier = modifier,&#10;            onSessionComplete = { currentScreen = 34 }&#10;        )&#10;        34 -&gt; com.example.app.ui.feature.learn.learnmode.LearnModeSessionAnalyticsScreen(&#10;            onPracticeAgain = { currentScreen = 31 },&#10;            onContinue = { currentScreen = 35 },&#10;            modifier = modifier&#10;        )&#10;        35 -&gt; com.example.app.ui.feature.learn.learnmode.LearnModeFinishedScreen(&#10;            onEndSession = { currentScreen = 1 },&#10;            modifier = modifier&#10;        )&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.example.app.ui.feature.home&#10;&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.platform.LocalContext&#10;import com.example.app.data.SessionManager&#10;import com.example.app.data.repository.WordRepository&#10;import com.example.app.data.repository.SetRepository&#10;import com.example.app.data.AppDatabase&#10;import com.example.app.ui.feature.dashboard.DashboardScreen&#10;import com.example.app.ui.feature.learn.LearnScreen&#10;import com.example.app.ui.feature.classroom.*&#10;import com.example.app.ui.feature.learn.LessonScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.TutorialModeScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.TutorialModeStudentScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.TutorialSessionScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.SessionAnalyticsScreen&#10;import com.example.app.ui.feature.learn.tutorialmode.TutorialFinishedScreen&#10;import com.example.app.ui.feature.learn.learnmode.LearnModeScreen&#10;import com.example.app.ui.feature.learn.activities.YourActivitiesScreen&#10;import com.example.app.ui.feature.learn.activities.AddNewActivityScreen&#10;import com.example.app.ui.feature.learn.activities.ActivitySetsScreen&#10;import com.example.app.ui.feature.learn.activities.LinkSetsToActivityScreen&#10;import com.example.app.ui.feature.learn.set.SelectSetsScreen&#10;import com.example.app.ui.feature.learn.set.YourSetsScreen&#10;import com.example.app.ui.feature.learn.set.AddSetScreen&#10;import com.example.app.ui.feature.learn.set.EditSetScreen&#10;import com.example.app.ui.feature.learn.set.SelectWordsScreen&#10;import com.example.app.ui.feature.learn.ConfirmationScreen&#10;import com.example.app.ui.feature.learn.learnmode.LearnModeActivitySelectionScreen&#10;&#10;@Composable&#10;fun MainNavigationContainer(&#10;    modifier: Modifier = Modifier,&#10;    onLogout: () -&gt; Unit = {},&#10;    onNavigateToWatchPairing: () -&gt; Unit = {}&#10;) {&#10;    var currentScreen by remember { mutableStateOf(0) }&#10;&#10;    // --- CLASS SECTION STATE ---&#10;    var createdClassName by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedClassId by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedClassName by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedClassCode by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedClassBannerPath by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var addedStudentName by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedStudentId by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedStudentName by remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    // --- TUTORIAL MODE STATE ---&#10;    var tutorialModeStudentId by remember { mutableStateOf(0L) }&#10;    var tutorialModeClassId by remember { mutableStateOf(0L) }&#10;    var tutorialSessionTitle by remember { mutableStateOf(&quot;&quot;) }&#10;&#10;    // --- ACTIVITIES &amp; SETS STATE ---&#10;    var selectedActivityId by remember { mutableStateOf(0L) }&#10;    var selectedActivityTitle by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedActivityIconRes by remember { mutableStateOf(com.example.app.R.drawable.ic_apple) }&#10;    var availableWords by remember { mutableStateOf(listOf&lt;com.example.app.data.entity.Word&gt;()) }&#10;    var createdSetTitle by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedSetId by remember { mutableStateOf(0L) }&#10;    var learnModeSessionKey by remember { mutableStateOf(0) } // Key to force fresh ViewModel&#10;    var yourSetsScreenKey by remember { mutableStateOf(0) }&#10;    var wordsForCreation by remember { mutableStateOf(listOf&lt;SetRepository.SelectedWordConfig&gt;()) }&#10;    var wordsForEdit by remember { mutableStateOf(listOf&lt;SetRepository.SelectedWordConfig&gt;()) }&#10;&#10;    // --- REPOSITORY &amp; CONTEXT HELPERS ---&#10;    val context = LocalContext.current&#10;    val sessionManager = remember { SessionManager.getInstance(context) }&#10;    val userId = remember { sessionManager.getUserId() }&#10;    val wordRepository = remember { WordRepository(AppDatabase.getInstance(context).wordDao()) }&#10;    val setRepository = remember {&#10;        SetRepository(&#10;            AppDatabase.getInstance(context).setDao(),&#10;            AppDatabase.getInstance(context).setWordDao(),&#10;            AppDatabase.getInstance(context).wordDao()&#10;        )&#10;    }&#10;&#10;    when (currentScreen) {&#10;        0 -&gt; DashboardScreen(&#10;            modifier = modifier,&#10;            onNavigate = { currentScreen = it },&#10;            onLogout = onLogout,&#10;            onNavigateToWatchPairing = onNavigateToWatchPairing,&#10;            onNavigateToClassDetails = { classId, className, bannerPath -&gt;&#10;                selectedClassId = classId&#10;                selectedClassName = className&#10;                selectedClassBannerPath = bannerPath&#10;                currentScreen = 22 &#10;            }&#10;        )&#10;        1 -&gt; LearnScreen(onNavigate = { currentScreen = it }, modifier = modifier)&#10;        2 -&gt; ClassScreen(&#10;            onNavigate = { currentScreen = it },&#10;            onNavigateToCreateClass = { currentScreen = 20 },&#10;            onNavigateToClassDetails = { classId -&gt;&#10;                selectedClassId = classId&#10;                currentScreen = 22&#10;            },&#10;            onNavigateToStudentDetails = { sId, sName, cName -&gt;&#10;                selectedStudentId = sId&#10;                selectedStudentName = sName&#10;                selectedClassName = cName&#10;                currentScreen = 26&#10;            },&#10;            onNavigateToAddStudent = {&#10;                // Open Add Student flow from the top-level Class screen&#10;                currentScreen = 23&#10;            },&#10;            modifier = modifier&#10;        )&#10;        3 -&gt; LessonScreen(&#10;            onNavigate = { currentScreen = it },&#10;            onNavigateToActivities = { currentScreen = 6 },&#10;            onNavigateToSets = { currentScreen = 7 },&#10;            modifier = modifier&#10;        )&#10;        4 -&gt; TutorialModeScreen(&#10;            onBack = { currentScreen = 1 },&#10;            onStudentSelected = { studentId, classId -&gt;&#10;                tutorialModeStudentId = studentId&#10;                tutorialModeClassId = classId&#10;                currentScreen = 27&#10;            },&#10;            modifier = modifier&#10;        )&#10;        5 -&gt; LearnModeScreen(&#10;            onBack = { currentScreen = 1 },&#10;            onStudentSelected = { studentId, classId -&gt;&#10;                selectedStudentId = studentId.toString()&#10;                selectedClassId = classId.toString()&#10;                currentScreen = 31 // Navigate to activity selection screen&#10;            },&#10;            modifier = modifier&#10;        )&#10;        6 -&gt; YourActivitiesScreen(&#10;            onNavigate = { currentScreen = it },&#10;            onNavigateToSets = { activityId, activityTitle -&gt;&#10;                selectedActivityId = activityId&#10;                selectedActivityTitle = activityTitle&#10;                currentScreen = 16 &#10;            },&#10;            onBackClick = { currentScreen = 3 },&#10;            modifier = modifier&#10;        )&#10;        7 -&gt; {&#10;            key(yourSetsScreenKey) {&#10;                YourSetsScreen(&#10;                    userId = userId,&#10;                    onNavigate = { currentScreen = it },&#10;                    onBackClick = { currentScreen = 3 },&#10;                    onAddSetClick = {&#10;                        selectedActivityId = 0L&#10;                        wordsForCreation = emptyList()&#10;                        currentScreen = 11&#10;                    },&#10;                    onEditSetClick = { setId -&gt;&#10;                        selectedSetId = setId&#10;                        wordsForEdit = emptyList()&#10;                        currentScreen = 14&#10;                    },&#10;                    modifier = modifier&#10;                )&#10;            }&#10;        }&#10;        8 -&gt; AddNewActivityScreen(&#10;            userId = userId,&#10;            onNavigate = { currentScreen = it },&#10;            onBackClick = { currentScreen = 6 },&#10;            onActivityCreated = { currentScreen = 10 },&#10;            modifier = modifier&#10;        )&#10;        9 -&gt; SelectSetsScreen(&#10;            onNavigate = { currentScreen = it },&#10;            onBackClick = { currentScreen = 8 },&#10;            modifier = modifier&#10;        )&#10;        10 -&gt; ConfirmationScreen(&#10;            title = &quot;Activity Created!&quot;,&#10;            onContinueClick = { currentScreen = 6 },&#10;            modifier = modifier&#10;        )&#10;        11 -&gt; AddSetScreen(&#10;            userId = userId,&#10;            activityId = if (selectedActivityId &gt; 0L) selectedActivityId else null,&#10;            onBackClick = { currentScreen = if (selectedActivityId &gt; 0L) 16 else 7 },&#10;            onAddWordsClick = { currentScreen = 12 },&#10;            selectedWords = wordsForCreation,&#10;            onCreateSet = { title, _, _ -&gt;&#10;                createdSetTitle = title&#10;                currentScreen = 13&#10;            },&#10;            modifier = modifier&#10;        )&#10;        12 -&gt; {&#10;            LaunchedEffect(Unit) {&#10;                availableWords = wordRepository.getWordsForUserOnce(userId)&#10;            }&#10;            SelectWordsScreen(&#10;                availableWords = availableWords,&#10;                onBackClick = { currentScreen = 11 },&#10;                onWordsSelected = { words -&gt;&#10;                    wordsForCreation = words&#10;                    currentScreen = 11&#10;                },&#10;                modifier = modifier&#10;            )&#10;        }&#10;        13 -&gt; ConfirmationScreen(&#10;            title = &quot;Set Created!&quot;,&#10;            subtitle = createdSetTitle,&#10;            onContinueClick = {&#10;                yourSetsScreenKey++&#10;                currentScreen = if (selectedActivityId &gt; 0L) 16 else 7&#10;            },&#10;            modifier = modifier&#10;        )&#10;        14 -&gt; EditSetScreen(&#10;            setId = selectedSetId,&#10;            userId = userId,&#10;            onBackClick = { currentScreen = if (selectedActivityId &gt; 0L) 16 else 7 },&#10;            onAddWordsClick = { currentScreen = 15 },&#10;            onUpdateSuccess = {&#10;                yourSetsScreenKey++&#10;                currentScreen = if (selectedActivityId &gt; 0L) 16 else 7&#10;            },&#10;            onDeleteSuccess = {&#10;                yourSetsScreenKey++&#10;                currentScreen = if (selectedActivityId &gt; 0L) 16 else 7&#10;            },&#10;            selectedWords = wordsForEdit,&#10;            modifier = modifier&#10;        )&#10;        15 -&gt; {&#10;            LaunchedEffect(Unit) {&#10;                availableWords = wordRepository.getWordsForUserOnce(userId)&#10;            }&#10;            SelectWordsScreen(&#10;                availableWords = availableWords,&#10;                onBackClick = { currentScreen = 14 },&#10;                onWordsSelected = { words -&gt;&#10;                    wordsForEdit = words&#10;                    currentScreen = 14&#10;                },&#10;                modifier = modifier&#10;            )&#10;        }&#10;        16 -&gt; {&#10;            key(yourSetsScreenKey) {&#10;                ActivitySetsScreen(&#10;                    activityId = selectedActivityId,&#10;                    activityTitle = selectedActivityTitle,&#10;                    onNavigate = { currentScreen = it },&#10;                    onBackClick = { currentScreen = 6 },&#10;                    onAddSetClick = { currentScreen = 17 },&#10;                    onViewSetClick = { setId -&gt;&#10;                        selectedSetId = setId&#10;                        currentScreen = 14&#10;                    },&#10;                    modifier = modifier&#10;                )&#10;            }&#10;        }&#10;        17 -&gt; LinkSetsToActivityScreen(&#10;            activityId = selectedActivityId,&#10;            userId = userId,&#10;            onBackClick = { currentScreen = 16 },&#10;            onSetsLinked = {&#10;                yourSetsScreenKey++&#10;                currentScreen = 16&#10;            },&#10;            modifier = modifier&#10;        )&#10;&#10;        // --- Classroom Flow (20-26) ---&#10;        20 -&gt; CreateClassScreen(&#10;            onNavigateBack = { currentScreen = 2 },&#10;            onClassCreated = { className -&gt;&#10;                createdClassName = className&#10;                currentScreen = 21&#10;            },&#10;            modifier = modifier&#10;        )&#10;        21 -&gt; ClassCreatedSuccessScreen(&#10;            className = createdClassName,&#10;            onContinue = { currentScreen = 2 },&#10;            modifier = modifier&#10;        )&#10;        22 -&gt; ClassDetailsScreen(&#10;            classId = selectedClassId,&#10;            onNavigateBack = { currentScreen = 2 },&#10;            onNavigateToAddStudent = { className -&gt;&#10;                selectedClassName = className&#10;                currentScreen = 23&#10;            },&#10;            onNavigateToEditClass = { id, name, code, banner -&gt;&#10;                selectedClassId = id&#10;                selectedClassName = name&#10;                selectedClassCode = code&#10;                selectedClassBannerPath = banner&#10;                currentScreen = 25&#10;            },&#10;            onNavigateToStudentDetails = { sId, sName, cName -&gt;&#10;                selectedStudentId = sId&#10;                selectedStudentName = sName&#10;                selectedClassName = cName&#10;                currentScreen = 26&#10;            },&#10;            modifier = modifier&#10;        )&#10;        23 -&gt; AddStudentScreen(&#10;            onNavigateBack = { currentScreen = 2 },&#10;            onStudentAdded = { studentName -&gt;&#10;                addedStudentName = studentName&#10;                currentScreen = 24&#10;            },&#10;            modifier = modifier&#10;        )&#10;        24 -&gt; StudentAddedSuccessScreen(&#10;            studentName = addedStudentName,&#10;            onContinue = { currentScreen = 2 },&#10;            modifier = modifier&#10;        )&#10;        25 -&gt; EditClassScreen(&#10;            classId = selectedClassId,&#10;            initialClassName = selectedClassName,&#10;            initialClassCode = selectedClassCode,&#10;            initialBannerPath = selectedClassBannerPath,&#10;            onNavigateBack = { currentScreen = 22 },&#10;            onSaveChanges = { newName, newCode -&gt;&#10;                selectedClassName = newName&#10;                selectedClassCode = newCode&#10;            },&#10;            onArchiveClass = { currentScreen = 2 },&#10;            modifier = modifier&#10;        )&#10;        26 -&gt; StudentDetailsScreen(&#10;            studentId = selectedStudentId,&#10;            studentName = selectedStudentName,&#10;            className = selectedClassName,&#10;            classId = selectedClassId,&#10;            onNavigateBack = { currentScreen = 2 },&#10;            modifier = modifier&#10;        )&#10;        27 -&gt; TutorialModeStudentScreen(&#10;            studentId = tutorialModeStudentId,&#10;            classId = tutorialModeClassId,&#10;            onBack = { currentScreen = 4 },&#10;            onStartSession = { title -&gt;&#10;                tutorialSessionTitle = title&#10;                currentScreen = 28&#10;            },&#10;            modifier = modifier&#10;        )&#10;        28 -&gt; TutorialSessionScreen(&#10;            title = tutorialSessionTitle,&#10;            onEndSession = { currentScreen = 29 },&#10;            modifier = modifier&#10;        )&#10;        29 -&gt; SessionAnalyticsScreen(&#10;            onPracticeAgain = { currentScreen = 28 },&#10;            onContinue = { currentScreen = 30 },&#10;            modifier = modifier&#10;        )&#10;        30 -&gt; TutorialFinishedScreen(&#10;            onEndSession = { currentScreen = 4 },&#10;            modifier = modifier&#10;        )&#10;        31 -&gt; LearnModeActivitySelectionScreen(&#10;            studentId = selectedStudentId.toLongOrNull() ?: 0L,&#10;            classId = selectedClassId.toLongOrNull() ?: 0L,&#10;            onBack = { currentScreen = 5 },&#10;            onSelectActivity = { activityId: Long, activityTitle: String -&gt;&#10;                selectedActivityId = activityId&#10;                selectedActivityTitle = activityTitle&#10;                // Optionally set a default icon or handle icon selection elsewhere&#10;                currentScreen = 32 // Navigate to LearnModeSetStatusScreen&#10;            },&#10;            modifier = modifier&#10;        )&#10;        32 -&gt; {&#10;            val setsFlow = remember(selectedActivityId) { setRepository.getSetsForActivity(selectedActivityId) }&#10;            val sets by setsFlow.collectAsState(initial = emptyList())&#10;            val activitySetStatuses = sets.map {&#10;                com.example.app.ui.feature.learn.learnmode.ActivitySetStatus(&#10;                    setId = it.id,&#10;                    title = it.title,&#10;                    status = &quot;Not Started&quot; // TODO: Replace with real status if available&#10;                )&#10;            }&#10;            com.example.app.ui.feature.learn.learnmode.LearnModeSetStatusScreen(&#10;                activityIconRes = selectedActivityIconRes,&#10;                activityTitle = selectedActivityTitle,&#10;                sets = activitySetStatuses,&#10;                onBack = { currentScreen = 31 },&#10;                onStartSet = { set -&gt;&#10;                    // Navigate to LearnModeSessionScreen and pass the set id and title&#10;                    selectedSetId = set.setId&#10;                    tutorialSessionTitle = set.title&#10;                    learnModeSessionKey++ // Increment to force fresh ViewModel&#10;                    currentScreen = 33&#10;                },&#10;                modifier = modifier&#10;            )&#10;        }&#10;        33 -&gt; {&#10;            com.example.app.ui.feature.learn.learnmode.LearnModeSessionScreen(&#10;                setId = selectedSetId,&#10;                activityTitle = tutorialSessionTitle,&#10;                sessionKey = learnModeSessionKey,&#10;                modifier = modifier,&#10;                onSessionComplete = { currentScreen = 34 }&#10;            )&#10;        }&#10;        34 -&gt; com.example.app.ui.feature.learn.learnmode.LearnModeSessionAnalyticsScreen(&#10;            onPracticeAgain = { currentScreen = 31 },&#10;            onContinue = { currentScreen = 35 },&#10;            modifier = modifier&#10;        )&#10;        35 -&gt; com.example.app.ui.feature.learn.learnmode.LearnModeFinishedScreen(&#10;            onEndSession = { currentScreen = 1 },&#10;            modifier = modifier&#10;        )&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/learnmode/LearnModeSessionScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/learnmode/LearnModeSessionScreen.kt" />
              <option name="originalContent" value="package com.example.app.ui.feature.learn.learnmode&#10;&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableIntStateOf&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import coil.compose.rememberAsyncImagePainter&#10;import coil.request.ImageRequest&#10;import com.example.app.R&#10;import com.example.app.data.AppDatabase&#10;import com.example.app.data.repository.SetRepository&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import java.io.File&#10;&#10;private val PurpleColor = Color(0xFFAE8EFB)&#10;private val LightPurpleColor = Color(0xFFE7DDFE)&#10;&#10;/**&#10; * Data class representing a word item in the learn mode session.&#10; */&#10;private data class WordItem(&#10;    val word: String,&#10;    val selectedLetterIndex: Int,&#10;    val imagePath: String?,&#10;    val configurationType: String&#10;) {&#10;    fun getMaskedWord(): String {&#10;        return word.mapIndexed { index, char -&gt;&#10;            if (index == selectedLetterIndex) &quot;_&quot; else char.uppercaseChar()&#10;        }.joinToString(&quot; &quot;)&#10;    }&#10;&#10;    fun getFullWord(): String {&#10;        return word.toList().joinToString(&quot; &quot;)&#10;    }&#10;&#10;    fun getBlankWord(): String {&#10;        return word.map { &quot;â–¬&quot; }.joinToString(&quot;  &quot;)&#10;    }&#10;}&#10;&#10;@Composable&#10;fun LearnModeSessionScreen(&#10;    setId: Long = 0L,&#10;    activityTitle: String = &quot;&quot;,&#10;    sessionKey: Int = 0,&#10;    modifier: Modifier = Modifier,&#10;    onSkip: () -&gt; Unit = {},&#10;    onAudioClick: () -&gt; Unit = {},&#10;    onSessionComplete: () -&gt; Unit = {}&#10;) {&#10;    // Local state - fresh on each recomposition with new sessionKey&#10;    var isLoading by remember(sessionKey) { mutableStateOf(true) }&#10;    var words by remember(sessionKey) { mutableStateOf&lt;List&lt;WordItem&gt;&gt;(emptyList()) }&#10;    var currentWordIndex by remember(sessionKey) { mutableIntStateOf(0) }&#10;    var title by remember(sessionKey) { mutableStateOf(activityTitle) }&#10;&#10;    val context = LocalContext.current&#10;&#10;    // Load data when screen opens - using sessionKey as key ensures this runs fresh each time&#10;    LaunchedEffect(setId, sessionKey) {&#10;        if (setId &gt; 0) {&#10;            isLoading = true&#10;            try {&#10;                val database = AppDatabase.getInstance(context)&#10;                val setRepository = SetRepository(&#10;                    database.setDao(),&#10;                    database.setWordDao(),&#10;                    database.wordDao()&#10;                )&#10;&#10;                val setDetails = withContext(Dispatchers.IO) {&#10;                    setRepository.getSetDetails(setId)&#10;                }&#10;&#10;                if (setDetails != null) {&#10;                    words = setDetails.words.map { wordConfig -&gt;&#10;                        WordItem(&#10;                            word = wordConfig.word,&#10;                            selectedLetterIndex = wordConfig.selectedLetterIndex,&#10;                            imagePath = wordConfig.imagePath,&#10;                            configurationType = wordConfig.configurationType&#10;                        )&#10;                    }&#10;                    title = activityTitle&#10;                }&#10;            } catch (e: Exception) {&#10;                // Handle error silently&#10;            } finally {&#10;                isLoading = false&#10;            }&#10;        } else {&#10;            isLoading = false&#10;        }&#10;    }&#10;&#10;    // Show loading&#10;    if (isLoading) {&#10;        Box(&#10;            modifier = modifier.fillMaxSize(),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            CircularProgressIndicator(color = PurpleColor)&#10;        }&#10;        return&#10;    }&#10;&#10;    val currentWord = words.getOrNull(currentWordIndex)&#10;    val totalWords = words.size.coerceAtLeast(1)&#10;    val currentStep = currentWordIndex + 1&#10;&#10;    // Function to handle skip/next&#10;    fun handleSkipOrNext() {&#10;        if (currentWordIndex &lt; words.size - 1) {&#10;            currentWordIndex++&#10;        } else {&#10;            // Session complete - navigate away&#10;            onSessionComplete()&#10;        }&#10;    }&#10;&#10;    Column(&#10;        modifier = modifier&#10;            .fillMaxSize()&#10;            .padding(horizontal = 20.dp)&#10;            .padding(top = 40.dp, bottom = 24.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally&#10;    ) {&#10;        // Progress Bar&#10;        ProgressIndicator(&#10;            currentStep = currentStep,&#10;            totalSteps = totalWords,&#10;            modifier = Modifier.fillMaxWidth(),&#10;            activeColor = PurpleColor,&#10;            inactiveColor = LightPurpleColor&#10;        )&#10;&#10;        Spacer(Modifier.height(12.dp))&#10;&#10;        // Audio Icon and Skip Button Row&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            IconButton(onClick = onAudioClick) {&#10;                Icon(&#10;                    painter = painterResource(id = R.drawable.ic_volume),&#10;                    contentDescription = &quot;Audio&quot;,&#10;                    tint = PurpleColor,&#10;                    modifier = Modifier.size(28.dp)&#10;                )&#10;            }&#10;&#10;            TextButton(onClick = {&#10;                onSkip()&#10;                handleSkipOrNext()&#10;            }) {&#10;                Text(&#10;                    text = &quot;Skip&quot;,&#10;                    color = PurpleColor,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;            }&#10;        }&#10;&#10;        Spacer(Modifier.height(8.dp))&#10;&#10;        // Title&#10;        Text(&#10;            text = title,&#10;            fontSize = 32.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = Color.Black&#10;        )&#10;&#10;        // Activity Type Subtitle (dynamic from database)&#10;        Text(&#10;            text = currentWord?.configurationType ?: &quot;&quot;,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.Medium,&#10;            color = PurpleColor&#10;        )&#10;&#10;        Spacer(Modifier.height(24.dp))&#10;&#10;        // Centered content area (slightly raised)&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .weight(1f),&#10;            horizontalAlignment = Alignment.CenterHorizontally,&#10;            verticalArrangement = Arrangement.Top&#10;        ) {&#10;            Spacer(Modifier.weight(0.3f))&#10;            // Large Content Card with Image (Square) - only show if there's an image&#10;            if (currentWord?.imagePath != null) {&#10;                Card(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth(0.85f)&#10;                        .aspectRatio(1f),&#10;                    shape = RoundedCornerShape(24.dp),&#10;                    colors = CardDefaults.cardColors(&#10;                        containerColor = Color(0xFFFBF9FF)&#10;                    ),&#10;                    border = BorderStroke(4.dp, Color(0xFFAE8EFB))&#10;                ) {&#10;                    Box(&#10;                        modifier = Modifier.fillMaxSize(),&#10;                        contentAlignment = Alignment.Center&#10;                    ) {&#10;                        Image(&#10;                            painter = rememberAsyncImagePainter(&#10;                                ImageRequest.Builder(context)&#10;                                    .data(File(currentWord.imagePath))&#10;                                    .crossfade(true)&#10;                                    .build()&#10;                            ),&#10;                            contentDescription = &quot;Word image&quot;,&#10;                            modifier = Modifier&#10;                                .fillMaxSize()&#10;                                .padding(16.dp),&#10;                            contentScale = ContentScale.Fit&#10;                        )&#10;                    }&#10;                }&#10;&#10;                Spacer(Modifier.height(24.dp))&#10;            }&#10;&#10;            // Masked Word Display (e.g., &quot;D _ G&quot;) or Full Word Display for &quot;Write the Word&quot; or Blank for &quot;Name the Picture&quot;&#10;            if (currentWord != null) {&#10;                val isWriteTheWord = currentWord.configurationType == &quot;Write the Word&quot;&#10;                val isNameThePicture = currentWord.configurationType == &quot;Name the Picture&quot;&#10;                Text(&#10;                    text = when {&#10;                        isNameThePicture -&gt; currentWord.getBlankWord()&#10;                        isWriteTheWord -&gt; currentWord.getFullWord()&#10;                        else -&gt; currentWord.getMaskedWord()&#10;                    },&#10;                    fontSize = if (currentWord.imagePath != null) 48.sp else 96.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = if (isWriteTheWord) Color(0xFF808080) else Color.Black,&#10;                    letterSpacing = if (currentWord.imagePath != null) 4.sp else 8.sp&#10;                )&#10;            }&#10;&#10;            Spacer(Modifier.weight(0.7f))&#10;        }&#10;&#10;        Spacer(Modifier.height(24.dp))&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ProgressIndicator(&#10;    currentStep: Int,&#10;    totalSteps: Int,&#10;    modifier: Modifier = Modifier,&#10;    activeColor: Color = PurpleColor,&#10;    inactiveColor: Color = LightPurpleColor&#10;) {&#10;    Row(&#10;        modifier = modifier,&#10;        horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;    ) {&#10;        repeat(totalSteps) { index -&gt;&#10;            val isActive = index &lt; currentStep&#10;            Box(&#10;                modifier = Modifier&#10;                    .weight(1f)&#10;                    .height(8.dp)&#10;                    .clip(RoundedCornerShape(4.dp))&#10;                    .background(&#10;                        if (isActive) activeColor else inactiveColor&#10;                    )&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true)&#10;@Composable&#10;fun LearnModeSessionScreenPreview() {&#10;    LearnModeSessionScreen(&#10;        setId = 0L,&#10;        activityTitle = &quot;Vowels&quot;,&#10;        sessionKey = 0&#10;    )&#10;}" />
              <option name="updatedContent" value="package com.example.app.ui.feature.learn.learnmode&#10;&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material3.Card&#10;import androidx.compose.material3.CardDefaults&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.LaunchedEffect&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableIntStateOf&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import coil.compose.rememberAsyncImagePainter&#10;import coil.request.ImageRequest&#10;import com.example.app.R&#10;import com.example.app.data.AppDatabase&#10;import com.example.app.data.repository.SetRepository&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import java.io.File&#10;&#10;private val PurpleColor = Color(0xFFAE8EFB)&#10;private val LightPurpleColor = Color(0xFFE7DDFE)&#10;&#10;/**&#10; * Data class representing a word item in the learn mode session.&#10; */&#10;private data class WordItem(&#10;    val word: String,&#10;    val selectedLetterIndex: Int,&#10;    val imagePath: String?,&#10;    val configurationType: String&#10;) {&#10;    fun getMaskedWord(): String {&#10;        return word.mapIndexed { index, char -&gt;&#10;            if (index == selectedLetterIndex) &quot;_&quot; else char&#10;        }.joinToString(&quot; &quot;)&#10;    }&#10;&#10;    fun getFullWord(): String {&#10;        return word.toList().joinToString(&quot; &quot;)&#10;    }&#10;&#10;    fun getBlankWord(): String {&#10;        return word.map { &quot;â–¬&quot; }.joinToString(&quot;  &quot;)&#10;    }&#10;}&#10;&#10;@Composable&#10;fun LearnModeSessionScreen(&#10;    setId: Long = 0L,&#10;    activityTitle: String = &quot;&quot;,&#10;    sessionKey: Int = 0,&#10;    modifier: Modifier = Modifier,&#10;    onSkip: () -&gt; Unit = {},&#10;    onAudioClick: () -&gt; Unit = {},&#10;    onSessionComplete: () -&gt; Unit = {}&#10;) {&#10;    // Local state - fresh on each recomposition with new sessionKey&#10;    var isLoading by remember(sessionKey) { mutableStateOf(true) }&#10;    var words by remember(sessionKey) { mutableStateOf&lt;List&lt;WordItem&gt;&gt;(emptyList()) }&#10;    var currentWordIndex by remember(sessionKey) { mutableIntStateOf(0) }&#10;    var title by remember(sessionKey) { mutableStateOf(activityTitle) }&#10;&#10;    val context = LocalContext.current&#10;&#10;    // Load data when screen opens - using sessionKey as key ensures this runs fresh each time&#10;    LaunchedEffect(setId, sessionKey) {&#10;        if (setId &gt; 0) {&#10;            isLoading = true&#10;            try {&#10;                val database = AppDatabase.getInstance(context)&#10;                val setRepository = SetRepository(&#10;                    database.setDao(),&#10;                    database.setWordDao(),&#10;                    database.wordDao()&#10;                )&#10;&#10;                val setDetails = withContext(Dispatchers.IO) {&#10;                    setRepository.getSetDetails(setId)&#10;                }&#10;&#10;                if (setDetails != null) {&#10;                    words = setDetails.words.map { wordConfig -&gt;&#10;                        WordItem(&#10;                            word = wordConfig.word,&#10;                            selectedLetterIndex = wordConfig.selectedLetterIndex,&#10;                            imagePath = wordConfig.imagePath,&#10;                            configurationType = wordConfig.configurationType&#10;                        )&#10;                    }&#10;                    title = activityTitle&#10;                }&#10;            } catch (e: Exception) {&#10;                // Handle error silently&#10;            } finally {&#10;                isLoading = false&#10;            }&#10;        } else {&#10;            isLoading = false&#10;        }&#10;    }&#10;&#10;    // Show loading&#10;    if (isLoading) {&#10;        Box(&#10;            modifier = modifier.fillMaxSize(),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            CircularProgressIndicator(color = PurpleColor)&#10;        }&#10;        return&#10;    }&#10;&#10;    val currentWord = words.getOrNull(currentWordIndex)&#10;    val totalWords = words.size.coerceAtLeast(1)&#10;    val currentStep = currentWordIndex + 1&#10;&#10;    // Function to handle skip/next&#10;    fun handleSkipOrNext() {&#10;        if (currentWordIndex &lt; words.size - 1) {&#10;            currentWordIndex++&#10;        } else {&#10;            // Session complete - navigate away&#10;            onSessionComplete()&#10;        }&#10;    }&#10;&#10;    Column(&#10;        modifier = modifier&#10;            .fillMaxSize()&#10;            .padding(horizontal = 20.dp)&#10;            .padding(top = 40.dp, bottom = 24.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally&#10;    ) {&#10;        // Progress Bar&#10;        ProgressIndicator(&#10;            currentStep = currentStep,&#10;            totalSteps = totalWords,&#10;            modifier = Modifier.fillMaxWidth(),&#10;            activeColor = PurpleColor,&#10;            inactiveColor = LightPurpleColor&#10;        )&#10;&#10;        Spacer(Modifier.height(12.dp))&#10;&#10;        // Audio Icon and Skip Button Row&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            IconButton(onClick = onAudioClick) {&#10;                Icon(&#10;                    painter = painterResource(id = R.drawable.ic_volume),&#10;                    contentDescription = &quot;Audio&quot;,&#10;                    tint = PurpleColor,&#10;                    modifier = Modifier.size(28.dp)&#10;                )&#10;            }&#10;&#10;            TextButton(onClick = {&#10;                onSkip()&#10;                handleSkipOrNext()&#10;            }) {&#10;                Text(&#10;                    text = &quot;Skip&quot;,&#10;                    color = PurpleColor,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;            }&#10;        }&#10;&#10;        Spacer(Modifier.height(8.dp))&#10;&#10;        // Title&#10;        Text(&#10;            text = title,&#10;            fontSize = 32.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = Color.Black&#10;        )&#10;&#10;        // Activity Type Subtitle (dynamic from database)&#10;        Text(&#10;            text = currentWord?.configurationType ?: &quot;&quot;,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.Medium,&#10;            color = PurpleColor&#10;        )&#10;&#10;        Spacer(Modifier.height(24.dp))&#10;&#10;        // Centered content area (slightly raised)&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .weight(1f),&#10;            horizontalAlignment = Alignment.CenterHorizontally,&#10;            verticalArrangement = Arrangement.Top&#10;        ) {&#10;            Spacer(Modifier.weight(0.3f))&#10;            // Large Content Card with Image (Square) - only show if there's an image&#10;            if (currentWord?.imagePath != null) {&#10;                Card(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth(0.85f)&#10;                        .aspectRatio(1f),&#10;                    shape = RoundedCornerShape(24.dp),&#10;                    colors = CardDefaults.cardColors(&#10;                        containerColor = Color(0xFFFBF9FF)&#10;                    ),&#10;                    border = BorderStroke(4.dp, Color(0xFFAE8EFB))&#10;                ) {&#10;                    Box(&#10;                        modifier = Modifier.fillMaxSize(),&#10;                        contentAlignment = Alignment.Center&#10;                    ) {&#10;                        Image(&#10;                            painter = rememberAsyncImagePainter(&#10;                                ImageRequest.Builder(context)&#10;                                    .data(File(currentWord.imagePath))&#10;                                    .crossfade(true)&#10;                                    .build()&#10;                            ),&#10;                            contentDescription = &quot;Word image&quot;,&#10;                            modifier = Modifier&#10;                                .fillMaxSize()&#10;                                .padding(16.dp),&#10;                            contentScale = ContentScale.Fit&#10;                        )&#10;                    }&#10;                }&#10;&#10;                // Extra spacing for cards to push text/dashes lower&#10;                val isNameThePicture = currentWord.configurationType == &quot;Name the Picture&quot;&#10;                val isFillInTheBlanks = currentWord.configurationType == &quot;Fill in the Blank&quot;&#10;                if (isNameThePicture || isFillInTheBlanks) {&#10;                    Spacer(Modifier.height(48.dp))&#10;                } else {&#10;                    Spacer(Modifier.height(24.dp))&#10;                }&#10;            }&#10;&#10;            // Masked Word Display (e.g., &quot;D _ G&quot;) or Full Word Display for &quot;Write the Word&quot; or Blank for &quot;Name the Picture&quot;&#10;            if (currentWord != null) {&#10;                val isWriteTheWord = currentWord.configurationType == &quot;Write the Word&quot;&#10;                val isNameThePicture = currentWord.configurationType == &quot;Name the Picture&quot;&#10;                Text(&#10;                    text = when {&#10;                        isNameThePicture -&gt; currentWord.getBlankWord()&#10;                        isWriteTheWord -&gt; currentWord.getFullWord()&#10;                        else -&gt; currentWord.getMaskedWord()&#10;                    },&#10;                    fontSize = if (currentWord.imagePath != null) 48.sp else 96.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = if (isWriteTheWord) Color(0xFF808080) else Color.Black,&#10;                    letterSpacing = if (currentWord.imagePath != null) 4.sp else 8.sp&#10;                )&#10;            }&#10;&#10;            Spacer(Modifier.weight(0.7f))&#10;        }&#10;&#10;        Spacer(Modifier.height(24.dp))&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ProgressIndicator(&#10;    currentStep: Int,&#10;    totalSteps: Int,&#10;    modifier: Modifier = Modifier,&#10;    activeColor: Color = PurpleColor,&#10;    inactiveColor: Color = LightPurpleColor&#10;) {&#10;    Row(&#10;        modifier = modifier,&#10;        horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;    ) {&#10;        repeat(totalSteps) { index -&gt;&#10;            val isActive = index &lt; currentStep&#10;            Box(&#10;                modifier = Modifier&#10;                    .weight(1f)&#10;                    .height(8.dp)&#10;                    .clip(RoundedCornerShape(4.dp))&#10;                    .background(&#10;                        if (isActive) activeColor else inactiveColor&#10;                    )&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true)&#10;@Composable&#10;fun LearnModeSessionScreenPreview() {&#10;    LearnModeSessionScreen(&#10;        setId = 0L,&#10;        activityTitle = &quot;Vowels&quot;,&#10;        sessionKey = 0&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/learnmode/LearnModeSessionViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/learnmode/LearnModeSessionViewModel.kt" />
              <option name="originalContent" value="package com.example.app.ui.feature.learn.learnmode&#10;&#10;import android.app.Application&#10;import androidx.lifecycle.AndroidViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.app.data.AppDatabase&#10;import com.example.app.data.repository.SetRepository&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;&#10;/**&#10; * Data class representing a word item in the learn mode session.&#10; */&#10;data class LearnModeWordItem(&#10;    val word: String,&#10;    val selectedLetterIndex: Int,&#10;    val imagePath: String?,&#10;    val configurationType: String&#10;) {&#10;    /**&#10;     * Returns the word with the selected letter masked as &quot;_&quot;&#10;     */&#10;    fun getMaskedWord(): String {&#10;        return word.mapIndexed { index, char -&gt;&#10;            if (index == selectedLetterIndex) &quot;_&quot; else char.uppercaseChar()&#10;        }.joinToString(&quot; &quot;)&#10;    }&#10;    &#10;    /**&#10;     * Returns the letter that is hidden/masked&#10;     */&#10;    fun getHiddenLetter(): Char {&#10;        return word.getOrElse(selectedLetterIndex) { ' ' }.uppercaseChar()&#10;    }&#10;}&#10;&#10;data class LearnModeSessionUiState(&#10;    val activityTitle: String = &quot;&quot;,&#10;    val words: List&lt;LearnModeWordItem&gt; = emptyList(),&#10;    val currentWordIndex: Int = 0,&#10;    val isLoading: Boolean = false,&#10;    val errorMessage: String? = null,&#10;    val isSessionComplete: Boolean = false&#10;) {&#10;    val currentWord: LearnModeWordItem?&#10;        get() = words.getOrNull(currentWordIndex)&#10;    &#10;    val totalWords: Int&#10;        get() = words.size&#10;    &#10;    val currentStep: Int&#10;        get() = currentWordIndex + 1&#10;}&#10;&#10;class LearnModeSessionViewModel(application: Application) : AndroidViewModel(application) {&#10;&#10;    private val database = AppDatabase.getInstance(application)&#10;    private val setRepository = SetRepository(&#10;        database.setDao(),&#10;        database.setWordDao(),&#10;        database.wordDao()&#10;    )&#10;&#10;    private val _uiState = MutableStateFlow(LearnModeSessionUiState())&#10;    val uiState: StateFlow&lt;LearnModeSessionUiState&gt; = _uiState.asStateFlow()&#10;&#10;    /**&#10;     * Load words for a specific set in learn mode&#10;     */&#10;    fun loadSetForLearnMode(setId: Long, activityTitle: String) {&#10;        viewModelScope.launch {&#10;            _uiState.update { it.copy(isLoading = true, activityTitle = activityTitle) }&#10;&#10;            try {&#10;                val setDetails = setRepository.getSetDetails(setId)&#10;                if (setDetails != null) {&#10;                    val wordItems = setDetails.words.map { wordConfig -&gt;&#10;                        LearnModeWordItem(&#10;                            word = wordConfig.word,&#10;                            selectedLetterIndex = wordConfig.selectedLetterIndex,&#10;                            imagePath = wordConfig.imagePath,&#10;                            configurationType = wordConfig.configurationType&#10;                        )&#10;                    }&#10;                    &#10;                    _uiState.update {&#10;                        it.copy(&#10;                            words = wordItems,&#10;                            currentWordIndex = 0,&#10;                            isLoading = false&#10;                        )&#10;                    }&#10;                } else {&#10;                    _uiState.update {&#10;                        it.copy(&#10;                            isLoading = false,&#10;                            errorMessage = &quot;Failed to load set details&quot;&#10;                        )&#10;                    }&#10;                }&#10;            } catch (e: Exception) {&#10;                _uiState.update {&#10;                    it.copy(&#10;                        isLoading = false,&#10;                        errorMessage = &quot;Error: ${e.message}&quot;&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Move to the next word in the session&#10;     */&#10;    fun nextWord() {&#10;        _uiState.update { state -&gt;&#10;            if (state.currentWordIndex &lt; state.words.size - 1) {&#10;                state.copy(currentWordIndex = state.currentWordIndex + 1)&#10;            } else {&#10;                state.copy(isSessionComplete = true)&#10;            }&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Skip current word and move to next&#10;     */&#10;    fun skipWord() {&#10;        nextWord()&#10;    }&#10;&#10;    /**&#10;     * Reset the session to start from the beginning&#10;     */&#10;    fun resetSession() {&#10;        _uiState.update {&#10;            it.copy(&#10;                currentWordIndex = 0,&#10;                isSessionComplete = false&#10;            )&#10;        }&#10;    }&#10;&#10;    fun clearError() {&#10;        _uiState.update { it.copy(errorMessage = null) }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.app.ui.feature.learn.learnmode&#10;&#10;import android.app.Application&#10;import androidx.lifecycle.AndroidViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.app.data.AppDatabase&#10;import com.example.app.data.repository.SetRepository&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.flow.update&#10;import kotlinx.coroutines.launch&#10;&#10;/**&#10; * Data class representing a word item in the learn mode session.&#10; */&#10;data class LearnModeWordItem(&#10;    val word: String,&#10;    val selectedLetterIndex: Int,&#10;    val imagePath: String?,&#10;    val configurationType: String&#10;) {&#10;    /**&#10;     * Returns the word with the selected letter masked as &quot;_&quot;&#10;     */&#10;    fun getMaskedWord(): String {&#10;        return word.mapIndexed { index, char -&gt;&#10;            if (index == selectedLetterIndex) &quot;_&quot; else char.uppercaseChar()&#10;        }.joinToString(&quot; &quot;)&#10;    }&#10;    &#10;    /**&#10;     * Returns the letter that is hidden/masked&#10;     */&#10;    fun getHiddenLetter(): Char {&#10;        return word.getOrElse(selectedLetterIndex) { ' ' }.uppercaseChar()&#10;    }&#10;}&#10;&#10;data class LearnModeSessionUiState(&#10;    val activityTitle: String = &quot;&quot;,&#10;    val words: List&lt;LearnModeWordItem&gt; = emptyList(),&#10;    val currentWordIndex: Int = 0,&#10;    val isLoading: Boolean = false,&#10;    val errorMessage: String? = null,&#10;    val isSessionComplete: Boolean = false&#10;) {&#10;    val currentWord: LearnModeWordItem?&#10;        get() = words.getOrNull(currentWordIndex)&#10;    &#10;    val totalWords: Int&#10;        get() = words.size&#10;    &#10;    val currentStep: Int&#10;        get() = currentWordIndex + 1&#10;}&#10;&#10;class LearnModeSessionViewModel(application: Application) : AndroidViewModel(application) {&#10;&#10;    private val database = AppDatabase.getInstance(application)&#10;    private val setRepository = SetRepository(&#10;        database.setDao(),&#10;        database.setWordDao(),&#10;        database.wordDao()&#10;    )&#10;&#10;    private val _uiState = MutableStateFlow(LearnModeSessionUiState())&#10;    val uiState: StateFlow&lt;LearnModeSessionUiState&gt; = _uiState.asStateFlow()&#10;&#10;    /**&#10;     * Load words for a specific set in learn mode&#10;     */&#10;    fun loadSetForLearnMode(setId: Long, activityTitle: String) {&#10;        viewModelScope.launch {&#10;            // Reset session state before loading new set&#10;            _uiState.update { &#10;                it.copy(&#10;                    isLoading = true, &#10;                    activityTitle = activityTitle,&#10;                    isSessionComplete = false,&#10;                    currentWordIndex = 0,&#10;                    errorMessage = null&#10;                ) &#10;            }&#10;            &#10;            try {&#10;                val setDetails = setRepository.getSetDetails(setId)&#10;                if (setDetails != null) {&#10;                    val wordItems = setDetails.words.map { wordConfig -&gt;&#10;                        LearnModeWordItem(&#10;                            word = wordConfig.word,&#10;                            selectedLetterIndex = wordConfig.selectedLetterIndex,&#10;                            imagePath = wordConfig.imagePath,&#10;                            configurationType = wordConfig.configurationType&#10;                        )&#10;                    }&#10;                    &#10;                    _uiState.update {&#10;                        it.copy(&#10;                            words = wordItems,&#10;                            currentWordIndex = 0,&#10;                            isLoading = false,&#10;                            isSessionComplete = false&#10;                        )&#10;                    }&#10;                } else {&#10;                    _uiState.update {&#10;                        it.copy(&#10;                            isLoading = false,&#10;                            errorMessage = &quot;Failed to load set details&quot;&#10;                        )&#10;                    }&#10;                }&#10;            } catch (e: Exception) {&#10;                _uiState.update {&#10;                    it.copy(&#10;                        isLoading = false,&#10;                        errorMessage = &quot;Error: ${e.message}&quot;&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Move to the next word in the session&#10;     */&#10;    fun nextWord() {&#10;        _uiState.update { state -&gt;&#10;            if (state.currentWordIndex &lt; state.words.size - 1) {&#10;                state.copy(currentWordIndex = state.currentWordIndex + 1)&#10;            } else {&#10;                state.copy(isSessionComplete = true)&#10;            }&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Skip current word and move to next&#10;     */&#10;    fun skipWord() {&#10;        nextWord()&#10;    }&#10;&#10;    /**&#10;     * Reset the session to start from the beginning&#10;     */&#10;    fun resetSession() {&#10;        _uiState.update {&#10;            it.copy(&#10;                currentWordIndex = 0,&#10;                isSessionComplete = false&#10;            )&#10;        }&#10;    }&#10;&#10;    fun clearError() {&#10;        _uiState.update { it.copy(errorMessage = null) }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/set/SelectWordsScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/set/SelectWordsScreen.kt" />
              <option name="originalContent" value="package com.example.app.ui.feature.learn.set&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.ArrowDropDown&#10;import androidx.compose.material.icons.filled.Search&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.ButtonDefaults&#10;import androidx.compose.material3.DropdownMenu&#10;import androidx.compose.material3.DropdownMenuItem&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.OutlinedTextFieldDefaults&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.ImeAction&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.app.data.entity.Word&#10;import com.example.app.data.repository.SetRepository&#10;import com.example.app.ui.components.BottomNavBar&#10;&#10;@Composable&#10;fun SelectWordsScreen(&#10;    availableWords: List&lt;Word&gt; = emptyList(),&#10;    onBackClick: () -&gt; Unit = {},&#10;    onWordsSelected: (selectedWords: List&lt;SetRepository.SelectedWordConfig&gt;) -&gt; Unit = {},&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var searchQuery by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedWords by remember { mutableStateOf(setOf&lt;String&gt;()) }&#10;    var wordConfigurations by remember { mutableStateOf(mapOf&lt;String, String&gt;()) }&#10;    var selectedLetterIndices by remember { mutableStateOf(mapOf&lt;String, Int&gt;()) }&#10;&#10;    // Optimize filtering with memoization&#10;    val filteredWords = remember(searchQuery, availableWords) {&#10;        if (searchQuery.isBlank()) {&#10;            availableWords&#10;        } else {&#10;            val query = searchQuery.lowercase()&#10;            availableWords.filter { it.word.lowercase().contains(query) }&#10;        }&#10;    }&#10;&#10;    Box(&#10;        modifier = modifier&#10;            .fillMaxSize()&#10;            .background(Color.White)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .verticalScroll(rememberScrollState())&#10;                .padding(horizontal = 20.dp)&#10;                .padding(bottom = 220.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally&#10;        ) {&#10;            Spacer(modifier = Modifier.height(24.dp))&#10;&#10;            // Header with back button&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                IconButton(&#10;                    onClick = onBackClick,&#10;                    modifier = Modifier.offset(x = (-12).dp)&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.AutoMirrored.Filled.ArrowBack,&#10;                        contentDescription = &quot;Back&quot;,&#10;                        tint = Color(0xFF3FA9F8)&#10;                    )&#10;                }&#10;&#10;                Spacer(modifier = Modifier.weight(1f))&#10;                Spacer(modifier = Modifier.width(48.dp))&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(24.dp))&#10;&#10;            // Title &quot;Select Word/s&quot;&#10;            Text(&#10;                text = &quot;Select Word/s&quot;,&#10;                fontSize = 32.sp,&#10;                fontWeight = FontWeight.Medium,&#10;                color = Color(0xFF0B0B0B),&#10;                textAlign = androidx.compose.ui.text.style.TextAlign.Center&#10;            )&#10;&#10;            Spacer(modifier = Modifier.height(24.dp))&#10;&#10;            // Search Bar&#10;            OutlinedTextField(&#10;                value = searchQuery,&#10;                onValueChange = { searchQuery = it },&#10;                placeholder = {&#10;                    Text(&#10;                        text = &quot;Search for Words&quot;,&#10;                        fontSize = 16.sp,&#10;                        color = Color(0xFF3FA9F8),&#10;                        fontWeight = FontWeight.Normal&#10;                    )&#10;                },&#10;                leadingIcon = {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Search,&#10;                        contentDescription = &quot;Search&quot;,&#10;                        tint = Color(0xFF3FA9F8),&#10;                        modifier = Modifier.size(20.dp)&#10;                    )&#10;                },&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(56.dp)&#10;                    .padding(horizontal = 15.dp),&#10;                shape = RoundedCornerShape(12.dp),&#10;                colors = OutlinedTextFieldDefaults.colors(&#10;                    focusedBorderColor = Color(0xFF3FA9F8),&#10;                    unfocusedBorderColor = Color(0xFFC5E5FD),&#10;                    focusedContainerColor = Color.White,&#10;                    unfocusedContainerColor = Color.White,&#10;                    cursorColor = Color(0xFF3FA9F8),&#10;                    focusedTextColor = Color(0xFF0B0B0B),&#10;                    unfocusedTextColor = Color(0xFF0B0B0B)&#10;                ),&#10;                textStyle = androidx.compose.ui.text.TextStyle(&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Normal&#10;                ),&#10;                singleLine = true,&#10;                keyboardOptions = KeyboardOptions(imeAction = ImeAction.Done)&#10;            )&#10;&#10;            Spacer(modifier = Modifier.height(24.dp))&#10;&#10;            // &quot;Select Word/s&quot; label with counter&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 15.dp),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;&#10;                &#10;            ) {&#10;                Text(&#10;                    text = &quot;Select Words&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Normal,&#10;                    color = Color(0xFF0B0B0B),&#10;                    textAlign = androidx.compose.ui.text.style.TextAlign.Start&#10;                )&#10;                &#10;                // Word count indicator&#10;                Text(&#10;                    text = &quot;${selectedWords.size} selected&quot;,&#10;                    fontSize = 14.sp,&#10;                    fontWeight = FontWeight.Medium,&#10;                    color = if (selectedWords.size &gt;= 3) Color(0xFF4CAF50) else Color(0xFF999999)&#10;                )&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;&#10;            // Word Selection Grid&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 15.dp)&#10;            ) {&#10;                val rows = filteredWords.chunked(2)&#10;                rows.forEachIndexed { rowIndex, rowWords -&gt;&#10;                    Row(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.spacedBy(20.dp)&#10;                    ) {&#10;                        rowWords.forEach { wordObj -&gt;&#10;                            WordButton(&#10;                                word = wordObj.word,&#10;                                isSelected = selectedWords.contains(wordObj.word),&#10;                                onClick = {&#10;                                    selectedWords = if (selectedWords.contains(wordObj.word)) {&#10;                                        selectedWords - wordObj.word&#10;                                    } else {&#10;                                        selectedWords + wordObj.word&#10;                                    }&#10;                                },&#10;                                modifier = Modifier.weight(1f)&#10;                            )&#10;                        }&#10;                        // Add spacer if only one item in last row&#10;                        if (rowWords.size == 1) {&#10;                            Spacer(modifier = Modifier.weight(1f))&#10;                        }&#10;                    }&#10;                    if (rowIndex &lt; rows.size - 1) {&#10;                        Spacer(modifier = Modifier.height(20.dp))&#10;                    }&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(32.dp))&#10;&#10;            // &quot;Configure&quot; label and items&#10;            if (selectedWords.isNotEmpty()) {&#10;                Text(&#10;                    text = &quot;Assign Question Type&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Normal,&#10;                    color = Color(0xFF0B0B0B),&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(horizontal = 15.dp),&#10;                    textAlign = androidx.compose.ui.text.style.TextAlign.Start&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                selectedWords.toList().forEachIndexed { index, word -&gt;&#10;                    val wordObj = availableWords.find { it.word == word }&#10;                    ConfigureWordItem(&#10;                        index = index + 1,&#10;                        word = word,&#10;                        hasImage = wordObj?.imagePath != null,&#10;                        configurationType = wordConfigurations[word] ?: &quot;Fill in the Blank&quot;,&#10;                        selectedLetterIndex = selectedLetterIndices[word] ?: 0,&#10;                        onConfigurationChange = { newConfig -&gt;&#10;                            wordConfigurations = wordConfigurations.toMutableMap().apply {&#10;                                this[word] = newConfig&#10;                            }&#10;                        },&#10;                        onLetterSelected = { letterIndex -&gt;&#10;                            selectedLetterIndices = selectedLetterIndices.toMutableMap().apply {&#10;                                this[word] = letterIndex&#10;                            }&#10;                        },&#10;                        modifier = Modifier.padding(horizontal = 15.dp)&#10;                    )&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(24.dp))&#10;            }&#10;        }&#10;        // Add Words Button at bottom&#10;        Button(&#10;            onClick = {&#10;                val configuredWords = selectedWords.map { word -&gt;&#10;                    SetRepository.SelectedWordConfig(&#10;                        wordName = word,&#10;                        configurationType = wordConfigurations[word] ?: &quot;Fill in the Blank&quot;,&#10;                        selectedLetterIndex = selectedLetterIndices[word] ?: 0&#10;                    )&#10;                }&#10;                onWordsSelected(configuredWords)&#10;            },&#10;            modifier = Modifier&#10;                .align(Alignment.BottomCenter)&#10;                .padding(bottom = 100.dp)&#10;                .fillMaxWidth(0.86f)&#10;                .height(56.dp),&#10;            colors = ButtonDefaults.buttonColors(&#10;                containerColor = Color(0xFF3FA9F8),&#10;                disabledContainerColor = Color(0xFFB3E5FC),&#10;                disabledContentColor = Color.White&#10;            ),&#10;            shape = RoundedCornerShape(16.dp),&#10;            contentPadding = PaddingValues(0.dp),&#10;            enabled = selectedWords.size &gt;= 3&#10;        ) {&#10;            Text(&#10;                text = if (selectedWords.size &gt;= 3) {&#10;                    &quot;Add ${selectedWords.size} Words&quot;&#10;                } else {&#10;                    &quot;Select at least 3 words&quot;&#10;                },&#10;                fontSize = 18.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = Color.White,&#10;                textAlign = TextAlign.Center,&#10;                modifier = Modifier.fillMaxWidth()&#10;            )&#10;        }&#10;&#10;        // Bottom Navigation Bar&#10;        BottomNavBar(&#10;            selectedTab = 2,&#10;            onTabSelected = { },&#10;            modifier = Modifier.align(Alignment.BottomCenter)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun WordButton(&#10;    word: String,&#10;    isSelected: Boolean,&#10;    onClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Button(&#10;        onClick = onClick,&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;            .height(50.dp),&#10;        shape = RoundedCornerShape(15.dp),&#10;        colors = ButtonDefaults.buttonColors(&#10;            containerColor = if (isSelected) Color(0xFF3FA9F8) else Color.White&#10;        ),&#10;        border = if (!isSelected) {&#10;            androidx.compose.foundation.BorderStroke(&#10;                width = 1.dp,&#10;                color = Color(0xFFC5E5FD)&#10;            )&#10;        } else {&#10;            null&#10;        },&#10;        contentPadding = PaddingValues(0.dp)&#10;    ) {&#10;        Text(&#10;            text = word,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.SemiBold,&#10;            color = if (isSelected) Color.White else Color(0xFF3FA9F8)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ConfigureWordItem(&#10;    index: Int,&#10;    word: String,&#10;    hasImage: Boolean,&#10;    configurationType: String,&#10;    selectedLetterIndex: Int,&#10;    onConfigurationChange: (String) -&gt; Unit,&#10;    onLetterSelected: (Int) -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var expandedDropdown by remember { mutableStateOf(false) }&#10;&#10;    // Filter dropdown options based on whether word has an image&#10;    val dropdownOptions = remember(hasImage) {&#10;        if (hasImage) {&#10;            listOf(&quot;Fill in the Blank&quot;, &quot;Name the Picture&quot;, &quot;Write the Word&quot;)&#10;        } else {&#10;            listOf(&quot;Fill in the Blank&quot;, &quot;Write the Word&quot;)&#10;        }&#10;    }&#10;&#10;    // Show letter selection only for &quot;Fill in the Blank&quot; mode&#10;    val showLetterSelection = configurationType == &quot;Fill in the Blank&quot;&#10;&#10;    Column(&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;    ) {&#10;        // Main row with index, word letters, and dropdown&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(60.dp)&#10;                .border(&#10;                    width = 1.dp,&#10;                    color = Color(0xFF3FA9F8),&#10;                    shape = RoundedCornerShape(15.dp)&#10;                )&#10;                .background(Color.White, RoundedCornerShape(15.dp))&#10;                .padding(horizontal = 12.dp),&#10;            verticalAlignment = Alignment.CenterVertically,&#10;            horizontalArrangement = Arrangement.SpaceBetween&#10;        ) {&#10;            // Left side: Index and letter buttons&#10;            Row(&#10;                modifier = Modifier.weight(1f),&#10;                verticalAlignment = Alignment.CenterVertically,&#10;                horizontalArrangement = Arrangement.spacedBy(4.dp)&#10;            ) {&#10;                Text(&#10;                    text = index.toString(),&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Normal,&#10;                    color = Color(0xFF3FA9F8)&#10;                )&#10;&#10;                Spacer(modifier = Modifier.width(8.dp))&#10;&#10;                // Letter buttons&#10;                if (showLetterSelection) {&#10;                    word.forEachIndexed { letterIndex, letter -&gt;&#10;                        LetterButton(&#10;                            letter = letter.uppercaseChar(),&#10;                            isSelected = letterIndex == selectedLetterIndex,&#10;                            onClick = { onLetterSelected(letterIndex) }&#10;                        )&#10;                    }&#10;                } else {&#10;                    // Show word as text for other modes&#10;                    Text(&#10;                        text = word,&#10;                        fontSize = 20.sp,&#10;                        fontWeight = FontWeight.SemiBold,&#10;                        color = Color(0xFF3FA9F8)&#10;                    )&#10;                }&#10;            }&#10;&#10;            // Dropdown button on the right&#10;            Box {&#10;            Button(&#10;                onClick = { expandedDropdown = !expandedDropdown },&#10;                modifier = Modifier&#10;                    .height(36.dp)&#10;                    .width(140.dp),&#10;                shape = RoundedCornerShape(12.dp),&#10;                colors = ButtonDefaults.buttonColors(&#10;                    containerColor = Color(0xFF3FA9F8)&#10;                ),&#10;                contentPadding = PaddingValues(horizontal = 8.dp)&#10;            ) {&#10;                Text(&#10;                    text = configurationType,&#10;                    fontSize = 12.sp,&#10;                    fontWeight = FontWeight.SemiBold,&#10;                    color = Color.White,&#10;                    maxLines = 1,&#10;                    overflow = androidx.compose.ui.text.style.TextOverflow.Ellipsis,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;                Icon(&#10;                    imageVector = Icons.Default.ArrowDropDown,&#10;                    contentDescription = &quot;Dropdown&quot;,&#10;                    tint = Color.White,&#10;                    modifier = Modifier.size(18.dp)&#10;                )&#10;            }&#10;&#10;            // Dropdown Menu with improved styling&#10;            DropdownMenu(&#10;                expanded = expandedDropdown,&#10;                onDismissRequest = { expandedDropdown = false },&#10;                modifier = Modifier&#10;                    .align(Alignment.TopEnd)&#10;                    .background(&#10;                        color = Color.White,&#10;                        shape = RoundedCornerShape(12.dp)&#10;                    )&#10;                    .border(&#10;                        width = 1.dp,&#10;                        color = Color(0xFFC5E5FD),&#10;                        shape = RoundedCornerShape(12.dp)&#10;                    )&#10;                    .padding(vertical = 8.dp)&#10;                    .width(IntrinsicSize.Max) // Allow dropdown to size itself based on content&#10;            ) {&#10;                dropdownOptions.forEach { option -&gt;&#10;                    DropdownMenuItem(&#10;                        text = {&#10;                            Text(&#10;                                text = option,&#10;                                fontSize = 16.sp,&#10;                                fontWeight = FontWeight.Normal,&#10;                                color = if (option == configurationType) Color(0xFF3FA9F8) else Color(0xFF0B0B0B),&#10;                                maxLines = 1,&#10;                                overflow = androidx.compose.ui.text.style.TextOverflow.Visible // Ensure text is not truncated&#10;                            )&#10;                        },&#10;                        onClick = {&#10;                            onConfigurationChange(option)&#10;                            expandedDropdown = false&#10;                        },&#10;                        modifier = Modifier&#10;                            .padding(horizontal = 8.dp)&#10;                            .height(40.dp)&#10;                            .background(&#10;                                color = if (option == configurationType) Color(0xFFF0F9FF) else Color.Transparent,&#10;                                shape = RoundedCornerShape(8.dp)&#10;                            )&#10;                            .fillMaxWidth() // Ensure full width usage&#10;                    )&#10;                    if (option != dropdownOptions.last()) {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(1.dp)&#10;                                .padding(horizontal = 16.dp)&#10;                                .background(Color(0xFFF5F5F5))&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun LetterButton(&#10;    letter: Char,&#10;    isSelected: Boolean,&#10;    onClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Button(&#10;        onClick = onClick,&#10;        modifier = modifier&#10;            .size(40.dp),&#10;        shape = RoundedCornerShape(10.dp),&#10;        colors = ButtonDefaults.buttonColors(&#10;            containerColor = if (isSelected) Color(0xFF3FA9F8) else Color.White&#10;        ),&#10;        border = if (!isSelected) {&#10;            androidx.compose.foundation.BorderStroke(&#10;                width = 1.dp,&#10;                color = Color(0xFFC5E5FD)&#10;            )&#10;        } else {&#10;            null&#10;        },&#10;        contentPadding = PaddingValues(0.dp)&#10;    ) {&#10;        Text(&#10;            text = letter.toString(),&#10;            fontSize = 18.sp,&#10;            fontWeight = FontWeight.SemiBold,&#10;            color = if (isSelected) Color.White else Color(0xFF3FA9F8)&#10;        )&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true, showSystemUi = true)&#10;@Composable&#10;fun SelectWordsScreenPreview() {&#10;    SelectWordsScreen()&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.app.ui.feature.learn.set&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.ArrowDropDown&#10;import androidx.compose.material.icons.filled.Search&#10;import androidx.compose.material3.Button&#10;import androidx.compose.material3.ButtonDefaults&#10;import androidx.compose.material3.DropdownMenu&#10;import androidx.compose.material3.DropdownMenuItem&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.OutlinedTextFieldDefaults&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.ImeAction&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.app.data.entity.Word&#10;import com.example.app.data.repository.SetRepository&#10;import com.example.app.ui.components.BottomNavBar&#10;&#10;@Composable&#10;fun SelectWordsScreen(&#10;    availableWords: List&lt;Word&gt; = emptyList(),&#10;    onBackClick: () -&gt; Unit = {},&#10;    onWordsSelected: (selectedWords: List&lt;SetRepository.SelectedWordConfig&gt;) -&gt; Unit = {},&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var searchQuery by remember { mutableStateOf(&quot;&quot;) }&#10;    var selectedWords by remember { mutableStateOf(setOf&lt;String&gt;()) }&#10;    var wordConfigurations by remember { mutableStateOf(mapOf&lt;String, String&gt;()) }&#10;    var selectedLetterIndices by remember { mutableStateOf(mapOf&lt;String, Int&gt;()) }&#10;&#10;    // Optimize filtering with memoization&#10;    val filteredWords = remember(searchQuery, availableWords) {&#10;        if (searchQuery.isBlank()) {&#10;            availableWords&#10;        } else {&#10;            val query = searchQuery.lowercase()&#10;            availableWords.filter { it.word.lowercase().contains(query) }&#10;        }&#10;    }&#10;&#10;    Box(&#10;        modifier = modifier&#10;            .fillMaxSize()&#10;            .background(Color.White)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .verticalScroll(rememberScrollState())&#10;                .padding(horizontal = 20.dp)&#10;                .padding(bottom = 220.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally&#10;        ) {&#10;            Spacer(modifier = Modifier.height(24.dp))&#10;&#10;            // Header with back button&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                IconButton(&#10;                    onClick = onBackClick,&#10;                    modifier = Modifier.offset(x = (-12).dp)&#10;                ) {&#10;                    Icon(&#10;                        imageVector = Icons.AutoMirrored.Filled.ArrowBack,&#10;                        contentDescription = &quot;Back&quot;,&#10;                        tint = Color(0xFF3FA9F8)&#10;                    )&#10;                }&#10;&#10;                Spacer(modifier = Modifier.weight(1f))&#10;                Spacer(modifier = Modifier.width(48.dp))&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(24.dp))&#10;&#10;            // Title &quot;Select Word/s&quot;&#10;            Text(&#10;                text = &quot;Select Word/s&quot;,&#10;                fontSize = 32.sp,&#10;                fontWeight = FontWeight.Medium,&#10;                color = Color(0xFF0B0B0B),&#10;                textAlign = androidx.compose.ui.text.style.TextAlign.Center&#10;            )&#10;&#10;            Spacer(modifier = Modifier.height(24.dp))&#10;&#10;            // Search Bar&#10;            OutlinedTextField(&#10;                value = searchQuery,&#10;                onValueChange = { searchQuery = it },&#10;                placeholder = {&#10;                    Text(&#10;                        text = &quot;Search for Words&quot;,&#10;                        fontSize = 16.sp,&#10;                        color = Color(0xFF3FA9F8),&#10;                        fontWeight = FontWeight.Normal&#10;                    )&#10;                },&#10;                leadingIcon = {&#10;                    Icon(&#10;                        imageVector = Icons.Default.Search,&#10;                        contentDescription = &quot;Search&quot;,&#10;                        tint = Color(0xFF3FA9F8),&#10;                        modifier = Modifier.size(20.dp)&#10;                    )&#10;                },&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(56.dp)&#10;                    .padding(horizontal = 15.dp),&#10;                shape = RoundedCornerShape(12.dp),&#10;                colors = OutlinedTextFieldDefaults.colors(&#10;                    focusedBorderColor = Color(0xFF3FA9F8),&#10;                    unfocusedBorderColor = Color(0xFFC5E5FD),&#10;                    focusedContainerColor = Color.White,&#10;                    unfocusedContainerColor = Color.White,&#10;                    cursorColor = Color(0xFF3FA9F8),&#10;                    focusedTextColor = Color(0xFF0B0B0B),&#10;                    unfocusedTextColor = Color(0xFF0B0B0B)&#10;                ),&#10;                textStyle = androidx.compose.ui.text.TextStyle(&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Normal&#10;                ),&#10;                singleLine = true,&#10;                keyboardOptions = KeyboardOptions(imeAction = ImeAction.Done)&#10;            )&#10;&#10;            Spacer(modifier = Modifier.height(24.dp))&#10;&#10;            // &quot;Select Word/s&quot; label with counter&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 15.dp),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;&#10;                &#10;            ) {&#10;                Text(&#10;                    text = &quot;Select Words&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Normal,&#10;                    color = Color(0xFF0B0B0B),&#10;                    textAlign = androidx.compose.ui.text.style.TextAlign.Start&#10;                )&#10;                &#10;                // Word count indicator&#10;                Text(&#10;                    text = &quot;${selectedWords.size} selected&quot;,&#10;                    fontSize = 14.sp,&#10;                    fontWeight = FontWeight.Medium,&#10;                    color = if (selectedWords.size &gt;= 3) Color(0xFF4CAF50) else Color(0xFF999999)&#10;                )&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;&#10;            // Word Selection Grid&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 15.dp)&#10;            ) {&#10;                val rows = filteredWords.chunked(2)&#10;                rows.forEachIndexed { rowIndex, rowWords -&gt;&#10;                    Row(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.spacedBy(20.dp)&#10;                    ) {&#10;                        rowWords.forEach { wordObj -&gt;&#10;                            WordButton(&#10;                                word = wordObj.word,&#10;                                isSelected = selectedWords.contains(wordObj.word),&#10;                                onClick = {&#10;                                    selectedWords = if (selectedWords.contains(wordObj.word)) {&#10;                                        selectedWords - wordObj.word&#10;                                    } else {&#10;                                        selectedWords + wordObj.word&#10;                                    }&#10;                                },&#10;                                modifier = Modifier.weight(1f)&#10;                            )&#10;                        }&#10;                        // Add spacer if only one item in last row&#10;                        if (rowWords.size == 1) {&#10;                            Spacer(modifier = Modifier.weight(1f))&#10;                        }&#10;                    }&#10;                    if (rowIndex &lt; rows.size - 1) {&#10;                        Spacer(modifier = Modifier.height(20.dp))&#10;                    }&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(32.dp))&#10;&#10;            // &quot;Configure&quot; label and items&#10;            if (selectedWords.isNotEmpty()) {&#10;                Text(&#10;                    text = &quot;Assign Question Type&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Normal,&#10;                    color = Color(0xFF0B0B0B),&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(horizontal = 15.dp),&#10;                    textAlign = androidx.compose.ui.text.style.TextAlign.Start&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                selectedWords.toList().forEachIndexed { index, word -&gt;&#10;                    val wordObj = availableWords.find { it.word == word }&#10;                    ConfigureWordItem(&#10;                        index = index + 1,&#10;                        word = word,&#10;                        hasImage = wordObj?.imagePath != null,&#10;                        configurationType = wordConfigurations[word] ?: &quot;Fill in the Blank&quot;,&#10;                        selectedLetterIndex = selectedLetterIndices[word] ?: 0,&#10;                        onConfigurationChange = { newConfig -&gt;&#10;                            wordConfigurations = wordConfigurations.toMutableMap().apply {&#10;                                this[word] = newConfig&#10;                            }&#10;                        },&#10;                        onLetterSelected = { letterIndex -&gt;&#10;                            selectedLetterIndices = selectedLetterIndices.toMutableMap().apply {&#10;                                this[word] = letterIndex&#10;                            }&#10;                        },&#10;                        modifier = Modifier.padding(horizontal = 15.dp)&#10;                    )&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(24.dp))&#10;            }&#10;        }&#10;        // Add Words Button at bottom&#10;        Button(&#10;            onClick = {&#10;                val configuredWords = selectedWords.map { word -&gt;&#10;                    SetRepository.SelectedWordConfig(&#10;                        wordName = word,&#10;                        configurationType = wordConfigurations[word] ?: &quot;Fill in the Blank&quot;,&#10;                        selectedLetterIndex = selectedLetterIndices[word] ?: 0&#10;                    )&#10;                }&#10;                onWordsSelected(configuredWords)&#10;            },&#10;            modifier = Modifier&#10;                .align(Alignment.BottomCenter)&#10;                .padding(bottom = 100.dp)&#10;                .fillMaxWidth(0.86f)&#10;                .height(56.dp),&#10;            colors = ButtonDefaults.buttonColors(&#10;                containerColor = Color(0xFF3FA9F8),&#10;                disabledContainerColor = Color(0xFFB3E5FC),&#10;                disabledContentColor = Color.White&#10;            ),&#10;            shape = RoundedCornerShape(16.dp),&#10;            contentPadding = PaddingValues(0.dp),&#10;            enabled = selectedWords.size &gt;= 3&#10;        ) {&#10;            Text(&#10;                text = if (selectedWords.size &gt;= 3) {&#10;                    &quot;Add ${selectedWords.size} Words&quot;&#10;                } else {&#10;                    &quot;Select at least 3 words&quot;&#10;                },&#10;                fontSize = 18.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = Color.White,&#10;                textAlign = TextAlign.Center,&#10;                modifier = Modifier.fillMaxWidth()&#10;            )&#10;        }&#10;&#10;        // Bottom Navigation Bar&#10;        BottomNavBar(&#10;            selectedTab = 2,&#10;            onTabSelected = { },&#10;            modifier = Modifier.align(Alignment.BottomCenter)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun WordButton(&#10;    word: String,&#10;    isSelected: Boolean,&#10;    onClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Button(&#10;        onClick = onClick,&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;            .height(50.dp),&#10;        shape = RoundedCornerShape(15.dp),&#10;        colors = ButtonDefaults.buttonColors(&#10;            containerColor = if (isSelected) Color(0xFF3FA9F8) else Color.White&#10;        ),&#10;        border = if (!isSelected) {&#10;            androidx.compose.foundation.BorderStroke(&#10;                width = 1.dp,&#10;                color = Color(0xFFC5E5FD)&#10;            )&#10;        } else {&#10;            null&#10;        },&#10;        contentPadding = PaddingValues(0.dp)&#10;    ) {&#10;        Text(&#10;            text = word,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.SemiBold,&#10;            color = if (isSelected) Color.White else Color(0xFF3FA9F8)&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ConfigureWordItem(&#10;    index: Int,&#10;    word: String,&#10;    hasImage: Boolean,&#10;    configurationType: String,&#10;    selectedLetterIndex: Int,&#10;    onConfigurationChange: (String) -&gt; Unit,&#10;    onLetterSelected: (Int) -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    var expandedDropdown by remember { mutableStateOf(false) }&#10;&#10;    // Filter dropdown options based on whether word has an image&#10;    val dropdownOptions = remember(hasImage) {&#10;        if (hasImage) {&#10;            listOf(&quot;Fill in the Blank&quot;, &quot;Name the Picture&quot;, &quot;Write the Word&quot;)&#10;        } else {&#10;            listOf(&quot;Fill in the Blank&quot;, &quot;Write the Word&quot;)&#10;        }&#10;    }&#10;&#10;    // Show letter selection only for &quot;Fill in the Blank&quot; mode&#10;    val showLetterSelection = configurationType == &quot;Fill in the Blank&quot;&#10;&#10;    Column(&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;    ) {&#10;        // Main row with index, word letters, and dropdown&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(60.dp)&#10;                .border(&#10;                    width = 1.dp,&#10;                    color = Color(0xFF3FA9F8),&#10;                    shape = RoundedCornerShape(15.dp)&#10;                )&#10;                .background(Color.White, RoundedCornerShape(15.dp))&#10;                .padding(horizontal = 12.dp),&#10;            verticalAlignment = Alignment.CenterVertically,&#10;            horizontalArrangement = Arrangement.SpaceBetween&#10;        ) {&#10;            // Left side: Index and letter buttons&#10;            Row(&#10;                modifier = Modifier.weight(1f),&#10;                verticalAlignment = Alignment.CenterVertically,&#10;                horizontalArrangement = Arrangement.spacedBy(4.dp)&#10;            ) {&#10;                Text(&#10;                    text = index.toString(),&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Normal,&#10;                    color = Color(0xFF3FA9F8)&#10;                )&#10;&#10;                Spacer(modifier = Modifier.width(8.dp))&#10;&#10;                // Letter buttons&#10;                if (showLetterSelection) {&#10;                    word.forEachIndexed { letterIndex, letter -&gt;&#10;                        LetterButton(&#10;                            letter = letter,&#10;                            isSelected = letterIndex == selectedLetterIndex,&#10;                            onClick = { onLetterSelected(letterIndex) }&#10;                        )&#10;                    }&#10;                } else {&#10;                    // Show word as text for other modes&#10;                    Text(&#10;                        text = word,&#10;                        fontSize = 20.sp,&#10;                        fontWeight = FontWeight.SemiBold,&#10;                        color = Color(0xFF3FA9F8)&#10;                    )&#10;                }&#10;            }&#10;&#10;            // Dropdown button on the right&#10;            Box {&#10;            Button(&#10;                onClick = { expandedDropdown = !expandedDropdown },&#10;                modifier = Modifier&#10;                    .height(36.dp)&#10;                    .width(140.dp),&#10;                shape = RoundedCornerShape(12.dp),&#10;                colors = ButtonDefaults.buttonColors(&#10;                    containerColor = Color(0xFF3FA9F8)&#10;                ),&#10;                contentPadding = PaddingValues(horizontal = 8.dp)&#10;            ) {&#10;                Text(&#10;                    text = configurationType,&#10;                    fontSize = 12.sp,&#10;                    fontWeight = FontWeight.SemiBold,&#10;                    color = Color.White,&#10;                    maxLines = 1,&#10;                    overflow = androidx.compose.ui.text.style.TextOverflow.Ellipsis,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;                Icon(&#10;                    imageVector = Icons.Default.ArrowDropDown,&#10;                    contentDescription = &quot;Dropdown&quot;,&#10;                    tint = Color.White,&#10;                    modifier = Modifier.size(18.dp)&#10;                )&#10;            }&#10;&#10;            // Dropdown Menu with improved styling&#10;            DropdownMenu(&#10;                expanded = expandedDropdown,&#10;                onDismissRequest = { expandedDropdown = false },&#10;                modifier = Modifier&#10;                    .align(Alignment.TopEnd)&#10;                    .background(&#10;                        color = Color.White,&#10;                        shape = RoundedCornerShape(12.dp)&#10;                    )&#10;                    .border(&#10;                        width = 1.dp,&#10;                        color = Color(0xFFC5E5FD),&#10;                        shape = RoundedCornerShape(12.dp)&#10;                    )&#10;                    .padding(vertical = 8.dp)&#10;                    .width(IntrinsicSize.Max) // Allow dropdown to size itself based on content&#10;            ) {&#10;                dropdownOptions.forEach { option -&gt;&#10;                    DropdownMenuItem(&#10;                        text = {&#10;                            Text(&#10;                                text = option,&#10;                                fontSize = 16.sp,&#10;                                fontWeight = FontWeight.Normal,&#10;                                color = if (option == configurationType) Color(0xFF3FA9F8) else Color(0xFF0B0B0B),&#10;                                maxLines = 1,&#10;                                overflow = androidx.compose.ui.text.style.TextOverflow.Visible // Ensure text is not truncated&#10;                            )&#10;                        },&#10;                        onClick = {&#10;                            onConfigurationChange(option)&#10;                            expandedDropdown = false&#10;                        },&#10;                        modifier = Modifier&#10;                            .padding(horizontal = 8.dp)&#10;                            .height(40.dp)&#10;                            .background(&#10;                                color = if (option == configurationType) Color(0xFFF0F9FF) else Color.Transparent,&#10;                                shape = RoundedCornerShape(8.dp)&#10;                            )&#10;                            .fillMaxWidth() // Ensure full width usage&#10;                    )&#10;                    if (option != dropdownOptions.last()) {&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(1.dp)&#10;                                .padding(horizontal = 16.dp)&#10;                                .background(Color(0xFFF5F5F5))&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun LetterButton(&#10;    letter: Char,&#10;    isSelected: Boolean,&#10;    onClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Button(&#10;        onClick = onClick,&#10;        modifier = modifier&#10;            .size(40.dp),&#10;        shape = RoundedCornerShape(10.dp),&#10;        colors = ButtonDefaults.buttonColors(&#10;            containerColor = if (isSelected) Color(0xFF3FA9F8) else Color.White&#10;        ),&#10;        border = if (!isSelected) {&#10;            androidx.compose.foundation.BorderStroke(&#10;                width = 1.dp,&#10;                color = Color(0xFFC5E5FD)&#10;            )&#10;        } else {&#10;            null&#10;        },&#10;        contentPadding = PaddingValues(0.dp)&#10;    ) {&#10;        Text(&#10;            text = letter.toString(),&#10;            fontSize = 18.sp,&#10;            fontWeight = FontWeight.SemiBold,&#10;            color = if (isSelected) Color.White else Color(0xFF3FA9F8)&#10;        )&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true, showSystemUi = true)&#10;@Composable&#10;fun SelectWordsScreenPreview() {&#10;    SelectWordsScreen()&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/tutorialmode/TutorialActivityCard.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/tutorialmode/TutorialActivityCard.kt" />
              <option name="updatedContent" value="package com.example.app.ui.feature.learn.tutorialmode&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.draw.drawBehind&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.PathEffect&#10;import androidx.compose.ui.graphics.drawscope.Stroke&#10;import androidx.compose.ui.geometry.CornerRadius&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Check&#10;import androidx.compose.ui.text.style.TextAlign&#10;import com.example.app.R&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.material3.MaterialTheme&#10;&#10;/**&#10; * Component for displaying a tutorial activity card with icon and title.&#10; * Uses yellow/orange color scheme with dashed border.&#10; *&#10; * @param title The activity title&#10; * @param iconRes The resource ID of the icon image&#10; * @param isSelected Whether the card is selected&#10; * @param onClick Callback when card is clicked&#10; * @param modifier Optional modifier for the card&#10; */&#10;@Composable&#10;fun TutorialActivityCard(&#10;    title: String,&#10;    iconRes: Int,&#10;    isSelected: Boolean = false,&#10;    onClick: () -&gt; Unit = {},&#10;    modifier: Modifier = Modifier&#10;) {&#10;    val yellowColor = Color(0xFFEDBB00)&#10;    val lightYellowColor = Color(0x80EDBB00)&#10;    val greenColor = Color(0xFF4CAF50)&#10;&#10;    Box(&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;            .height(175.dp)&#10;            .clip(RoundedCornerShape(28.dp))&#10;            .background(if (isSelected) yellowColor else Color.Transparent)&#10;            .clickable { onClick() }&#10;            .then(&#10;                if (!isSelected) {&#10;                    Modifier.drawBehind {&#10;                        val pathEffect = PathEffect.dashPathEffect(floatArrayOf(30f, 20f), 0f)&#10;                        drawRoundRect(&#10;                            color = yellowColor,&#10;                            style = Stroke(width = 12f, pathEffect = pathEffect),&#10;                            cornerRadius = CornerRadius(28.dp.toPx())&#10;                        )&#10;                    }&#10;                } else {&#10;                    Modifier&#10;                }&#10;            )&#10;            .padding(12.dp)&#10;    ) {&#10;        // Selection circle at top right&#10;        Box(&#10;            modifier = Modifier&#10;                .align(Alignment.TopEnd)&#10;                .size(36.dp)&#10;                .clip(CircleShape)&#10;                .background(if (isSelected) Color.White else Color.Transparent)&#10;                .drawBehind {&#10;                    if (!isSelected) {&#10;                        drawCircle(&#10;                            color = yellowColor,&#10;                            style = Stroke(width = 4f)&#10;                        )&#10;                    }&#10;                },&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            if (isSelected) {&#10;                Icon(&#10;                    imageVector = Icons.Filled.Check,&#10;                    contentDescription = &quot;Selected&quot;,&#10;                    tint = greenColor,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;        }&#10;&#10;        Column(&#10;            horizontalAlignment = Alignment.CenterHorizontally,&#10;            verticalArrangement = Arrangement.Center,&#10;            modifier = Modifier.fillMaxSize()&#10;        ) {&#10;            // Icon Circle with Border&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(100.dp)&#10;                    .clip(CircleShape)&#10;                    .background(Color.Transparent)&#10;                    .drawBehind {&#10;                        drawCircle(&#10;                            color = if (isSelected) Color(0x40FFFFFF) else lightYellowColor,&#10;                            style = Stroke(width = 16f)&#10;                        )&#10;                    },&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(80.dp)&#10;                        .clip(CircleShape)&#10;                        .background(if (isSelected) Color.White else yellowColor),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Image(&#10;                        painter = painterResource(id = iconRes),&#10;                        contentDescription = title,&#10;                        modifier = Modifier.size(60.dp),&#10;                        contentScale = ContentScale.Fit&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;&#10;            // Title&#10;            Text(&#10;                text = title,&#10;                fontSize = 24.sp,&#10;                fontWeight = FontWeight.Normal,&#10;                color = if (isSelected) Color.White else yellowColor,&#10;                textAlign = TextAlign.Center&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Preview(&#10;    name = &quot;TutorialActivityCard Unselected&quot;,&#10;    showBackground = true,&#10;    backgroundColor = 0xFFFFFFFF&#10;)&#10;@Composable&#10;fun TutorialActivityCardPreview() {&#10;    MaterialTheme {&#10;        TutorialActivityCard(&#10;            title = &quot;Vowels&quot;,&#10;            iconRes = R.drawable.ic_apple,&#10;            isSelected = false,&#10;            onClick = {}&#10;        )&#10;    }&#10;}&#10;&#10;@Preview(&#10;    name = &quot;TutorialActivityCard Selected&quot;,&#10;    showBackground = true,&#10;    backgroundColor = 0xFFFFFFFF&#10;)&#10;@Composable&#10;fun TutorialActivityCardSelectedPreview() {&#10;    MaterialTheme {&#10;        TutorialActivityCard(&#10;            title = &quot;Vowels&quot;,&#10;            iconRes = R.drawable.ic_apple,&#10;            isSelected = true,&#10;            onClick = {}&#10;        )&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/tutorialmode/components/tutorial/TutorialActivityCard.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/app/ui/feature/learn/tutorialmode/components/tutorial/TutorialActivityCard.kt" />
              <option name="updatedContent" value="package com.example.app.ui.feature.learn.tutorialmode.components.tutorial&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.draw.drawBehind&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.graphics.PathEffect&#10;import androidx.compose.ui.graphics.drawscope.Stroke&#10;import androidx.compose.ui.geometry.CornerRadius&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.compose.material3.Text&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Check&#10;import androidx.compose.ui.text.style.TextAlign&#10;import com.example.app.R&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.compose.material3.MaterialTheme&#10;&#10;/**&#10; * Component for displaying a tutorial activity card with icon and title.&#10; * Uses yellow/orange color scheme with dashed border.&#10; *&#10; * @param title The activity title&#10; * @param iconRes The resource ID of the icon image&#10; * @param isSelected Whether the card is selected&#10; * @param onClick Callback when card is clicked&#10; * @param modifier Optional modifier for the card&#10; */&#10;@Composable&#10;fun TutorialActivityCard(&#10;    title: String,&#10;    iconRes: Int,&#10;    isSelected: Boolean = false,&#10;    onClick: () -&gt; Unit = {},&#10;    modifier: Modifier = Modifier&#10;) {&#10;    val yellowColor = Color(0xFFEDBB00)&#10;    val lightYellowColor = Color(0x80EDBB00)&#10;    val greenColor = Color(0xFF4CAF50)&#10;&#10;    Box(&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;            .height(175.dp)&#10;            .clip(RoundedCornerShape(28.dp))&#10;            .background(if (isSelected) yellowColor else Color.Transparent)&#10;            .clickable { onClick() }&#10;            .then(&#10;                if (!isSelected) {&#10;                    Modifier.drawBehind {&#10;                        val pathEffect = PathEffect.dashPathEffect(floatArrayOf(30f, 20f), 0f)&#10;                        drawRoundRect(&#10;                            color = yellowColor,&#10;                            style = Stroke(width = 12f, pathEffect = pathEffect),&#10;                            cornerRadius = CornerRadius(28.dp.toPx())&#10;                        )&#10;                    }&#10;                } else {&#10;                    Modifier&#10;                }&#10;            )&#10;            .padding(12.dp)&#10;    ) {&#10;        // Selection circle at top right&#10;        Box(&#10;            modifier = Modifier&#10;                .align(Alignment.TopEnd)&#10;                .size(36.dp)&#10;                .clip(CircleShape)&#10;                .background(if (isSelected) Color.White else Color.Transparent)&#10;                .drawBehind {&#10;                    if (!isSelected) {&#10;                        drawCircle(&#10;                            color = yellowColor,&#10;                            style = Stroke(width = 4f)&#10;                        )&#10;                    }&#10;                },&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            if (isSelected) {&#10;                Icon(&#10;                    imageVector = Icons.Filled.Check,&#10;                    contentDescription = &quot;Selected&quot;,&#10;                    tint = greenColor,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;        }&#10;&#10;        Column(&#10;            horizontalAlignment = Alignment.CenterHorizontally,&#10;            verticalArrangement = Arrangement.Center,&#10;            modifier = Modifier.fillMaxSize()&#10;        ) {&#10;            // Icon Circle with Border&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(100.dp)&#10;                    .clip(CircleShape)&#10;                    .background(Color.Transparent)&#10;                    .drawBehind {&#10;                        drawCircle(&#10;                            color = if (isSelected) Color(0x40FFFFFF) else lightYellowColor,&#10;                            style = Stroke(width = 16f)&#10;                        )&#10;                    },&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(80.dp)&#10;                        .clip(CircleShape)&#10;                        .background(if (isSelected) Color.White else yellowColor),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Image(&#10;                        painter = painterResource(id = iconRes),&#10;                        contentDescription = title,&#10;                        modifier = Modifier.size(60.dp),&#10;                        contentScale = ContentScale.Fit&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;&#10;            // Title&#10;            Text(&#10;                text = title,&#10;                fontSize = 24.sp,&#10;                fontWeight = FontWeight.Normal,&#10;                color = if (isSelected) Color.White else yellowColor,&#10;                textAlign = TextAlign.Center&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Preview(&#10;    name = &quot;TutorialActivityCard Unselected&quot;,&#10;    showBackground = true,&#10;    backgroundColor = 0xFFFFFFFF&#10;)&#10;@Composable&#10;fun TutorialActivityCardPreview() {&#10;    MaterialTheme {&#10;        TutorialActivityCard(&#10;            title = &quot;Vowels&quot;,&#10;            iconRes = R.drawable.ic_apple,&#10;            isSelected = false,&#10;            onClick = {}&#10;        )&#10;    }&#10;}&#10;&#10;@Preview(&#10;    name = &quot;TutorialActivityCard Selected&quot;,&#10;    showBackground = true,&#10;    backgroundColor = 0xFFFFFFFF&#10;)&#10;@Composable&#10;fun TutorialActivityCardSelectedPreview() {&#10;    MaterialTheme {&#10;        TutorialActivityCard(&#10;            title = &quot;Vowels&quot;,&#10;            iconRes = R.drawable.ic_apple,&#10;            isSelected = true,&#10;            onClick = {}&#10;        )&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/ic_watch_temp.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/ic_watch_temp.xml" />
              <option name="updatedContent" value="&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;960&quot;&#10;    android:viewportHeight=&quot;960&quot;&gt;&#10;    &lt;path&#10;        android:fillColor=&quot;#000000&quot;&#10;        android:pathData=&quot;M420,160h120,-120ZM420,800h120,-120ZM360,880l-54,-182q-48,-38 -77,-95t-29,-123q0,-66 29,-123t77,-95l54,-182h240l54,182q48,38 77,95t29,123q0,66 -29,123t-77,95L600,880L360,880ZM480,680q83,0 141.5,-58.5T680,480q0,-83 -58.5,-141.5T480,320q-83,0 -141.5,58.5T280,480q0,83 58.5,141.5T480,680ZM404,210q20,-5 38.5,-8t37.5,-3q19,0 37.5,3t38.5,8l-16,-50L420,160l-16,50ZM420,800h120l16,-50q-20,5 -38.5,7.5T480,760q-19,0 -37.5,-2.5T404,750l16,50Z&quot;/&gt;&#10;&lt;/vector&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>